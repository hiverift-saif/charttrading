"use strict";(self.webpackChunk_am5=self.webpackChunk_am5||[]).push([[776],{133:function(e,t,i){i.r(t),i.d(t,{DefaultTheme:function(){return v},Gantt:function(){return Z},GanttCategoryAxis:function(){return G},GanttCategoryAxisRenderer:function(){return H},GanttDateAxis:function(){return l},GanttDateAxisRenderer:function(){return N},GanttSeries:function(){return V}});var s=i(8054),a=i(2936),o=i(1479),n=i(6245),r=i(5638);class l extends r.S{constructor(){super(...arguments),Object.defineProperty(this,"gantt",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}}Object.defineProperty(l,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GanttDateAxis"}),Object.defineProperty(l,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:r.S.classNames.concat([l.className])});var c=i(6901),h=i(3409),d=i(3035),g=i(3783),u=i(2754),p=i(1112),m=i(1926);class v extends h.Q{setupDefaultRules(){super.setupDefaultRules();const e=this._root.language,t=this._root.interfaceColors,i=this.rule.bind(this),s=e.translate("_date_day_full");i("Gantt").setAll({editable:!0,layout:this._root.verticalLayout,colors:u.U.new(this._root,{}),snapThreshold:.5,linkNewTasks:!0,durationUnit:"day",sidebarWidth:(0,n.aQ)(30),weekends:[0,6],width:n.AQ,height:n.AQ,gridIntervals:{year:[{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:6}],month:[{timeUnit:"week",count:1},{timeUnit:"week",count:2}],week:[{timeUnit:"day",count:1}],day:[{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12}],hour:[{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30}]}}),i("Container",["zoomcontrols"]).setAll({x:(0,n.aQ)(100),centerX:(0,n.aQ)(100),y:10,layout:this._root.verticalLayout}),i("XYChart",["gantt"]).setAll({panX:!0,panY:!0,paddingRight:0,wheelY:"panY"});{const e=i("Rectangle",["axisresizer"]);e.setAll({width:12,height:n.AQ,fillOpacity:.05,fill:t.get("alternativeBackground"),cursorOverStyle:"col-resize",interactive:!0}),e.states.create("hover",{fillOpacity:.1})}i("EditableLabel",["axis"]).setAll({paddingBottom:3,paddingTop:3,paddingLeft:5,paddingRight:5,cursorOverStyle:"text"}),i("GanttCategoryAxis").setAll({maxDeviation:0,zoomOut:!1,childShift:25,childCellSize:.8,minCellHeight:70}),i("GanttCategoryAxisRenderer").setAll({inversed:!0,minGridDistance:10}),i("GanttDateAxis").setAll({maxZoomFactor:1e7,extraMax:.03,extraMin:.02,autoZoom:!1,markUnitChange:!1,weekLabelLocation:.5,cursorOverStyle:"pointer",gridIntervals:[{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10}],dateFormats:{hour:e.translate("_date_hour_full"),day:e.translate("_date_day"),week:s,month:e.translate("_date_month_full"),year:e.translate("_date_year")}}),i("GanttDateAxis",["minor"]).setAll({dateFormats:{millisecond:"SSS",second:"ss",minute:"mm",hour:e.translate("_date_hour_short"),day:"EEEEE",week:e.translate("_date_day"),month:e.translate("_date_month"),year:e.translate("_date_year")},fillRule:e=>{var t;const i=e.get("axisFill");if(i){const s=e.component,a=e.get("value",0),o=e.get("endValue",0),n=s.getPrivate("baseInterval"),r=s.getPrivate("gridInterval",n),l=null===(t=s.gantt)||void 0===t?void 0:t.get("weekends",[0,6]);if(i.set("visible",!1),"day"==r.timeUnit){let e=new Date(a).getDay();const t=o-a,s=m.getDuration("day",1);l&&-1!=l.indexOf(e)&&t>=.9*s&&t<=1.1*s?i.set("visible",!0):i.set("visible",!1)}}}}),i("GanttDateAxisRenderer").setAll({minGridDistance:150,opposite:!0}),i("GanttDateAxisRenderer",["minor"]).setAll({minGridDistance:50,opposite:!0}),i("Grid",["cursor","x"]).setAll({forceHidden:!0}),i("Grid",["cursor","y"]).setAll({forceHidden:!0}),i("Grid",["range"]).setAll({stroke:t.get("negative"),strokeOpacity:1,strokeWidth:2,strokeDasharray:[4,2]}),i("AxisLabel",["x"]).setAll({paddingBottom:15,multiLocation:.5}),i("EditableAxisLabel").setAll({y:n.CI,populateText:!0,text:"{name}",centerY:n.CI,oversizedBehavior:"truncate",marginRight:10}),i("AxisTick",["gantt","renderer","x"]).setAll({strokeOpacity:.1,visible:!0,location:1,length:29}),i("AxisTick",["gantt","axis","y"]).states.create("hover",{stroke:t.get("primaryButton"),strokeOpacity:1,strokeWidth:3}),i("AxisTick",["gantt","renderer","y"]).setAll({strokeOpacity:.1,visible:!0,location:1}),i("Grid",["gantt","renderer","x"]).setAll({forceHidden:!0});{const e=i("Grid",["gantt","renderer","x","minor"]);e.setAll({forceHidden:!1,location:1}),e.states.create("hover",{stroke:t.get("primaryButton"),strokeOpacity:1,strokeWidth:2})}i("Grid",["gantt","renderer","y"]).setAll({location:1}),i("Container",["axislabelcontainer"]).setAll({minWidth:150,draggable:!0}),i("Rectangle",["axislabelcontainer","background"]).setAll({fill:t.get("alternativeBackground"),fillOpacity:0,interactive:!0}),i("Rectangle",["axislabelcontainer","background"]).states.create("hover",{fillOpacity:.05}),i("Rectangle",["axislabelcontainer","background"]).states.create("active",{fillOpacity:.07}),i("EditableLabel",["categorylabel"]).setAll({minWidth:100,multiLine:!1}),i("Container",["axislabelcontrols"]).setAll({height:n.AQ,layout:this._root.horizontalLayout}),i("Rectangle",["gantt","grip","axislabel"]).setAll({width:18,height:25,cursorOverStyle:"ns-resize",interactive:!0,centerY:n.CI,y:n.CI,fillPattern:d.y.new(this._root,{color:t.get("alternativeBackground"),colorOpacity:.2,rotation:0,gap:3})}),i("ProgressPie").setAll({y:n.CI,centerY:0,width:32,height:32,marginLeft:15,cursorOverStyle:"pointer"}),i("NumericStepper").setAll({y:n.CI,centerY:n.CI}),i("GanttSeries").setAll({linkHorizontalOffset:25,snapCount:1,exactLocationX:!0}),i("RoundedRectangle",["series","column","gantt"]).setAll({maxHeight:60,draggable:!0,cornerRadiusBL:5,cornerRadiusTL:5,cornerRadiusBR:5,cornerRadiusTR:5,fillOpacity:.8,strokeWidth:2,tooltipY:0,tooltipText:"{name}: {openValueX.formatDate('"+s+"')} - {valueX.formatDate('"+s+"')}"}),i("RoundedRectangle",["column","series","gantt"]).states.create("hover",{strokeWidth:3,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1}),i("RoundedRectangle",["column","series","gantt"]).states.create("disabled",{opacity:.2,forceInactive:!0}),i("RoundedRectangle",["series","column","gantt"]).states.create("hidden",{opacity:0,visible:!1,strokeOpacity:0}),i("Container",["columncontainer"]).states.create("disabled",{opacity:.2,forceInactive:!0}),i("Container",["maskedcontainer"]).setAll({position:"absolute"}),i("RoundedRectangle",["zerorectangle"]).setAll({draggable:!0,cornerRadiusBL:2,cornerRadiusTL:2,cornerRadiusBR:2,cornerRadiusTR:2,strokeWidth:2,rotation:45,fillOpacity:.8,centerX:n.CI,centerY:n.CI,y:n.CI,tooltipText:"{name}: {openValueX.formatDate('"+s+"')}"}),i("RoundedRectangle",["zerorectangle"]).states.create("disabled",{opacity:.5,forceInactive:!0}),i("Circle",["connectorbullet","start","gantt"]).setAll({strokeWidth:2,strokeOpacity:1,radius:8,y:n.CI,fill:t.get("background"),stroke:t.get("alternativeBackground"),fillOpacity:1,cursorOverStyle:"pointer",role:"figure",interactive:!0,visible:!1}),i("Circle",["connectorbullet","end","gantt"]).setAll({strokeWidth:2,strokeOpacity:1,radius:8,y:n.CI,fill:t.get("background"),stroke:t.get("alternativeBackground"),fillOpacity:1,cursorOverStyle:"pointer",role:"figure",interactive:!0}),i("Circle",["connectorbullet","gantt","end"]).states.create("hover",{scale:1.2}),i("Circle",["connectorbullet","gantt","end"]).states.create("activehover",{scale:1.2,strokeWidth:4}),i("Rectangle",["progressrectangle","gantt"]).setAll({forceInactive:!0,width:1,fill:t.get("background"),fillOpacity:.2,strokeOpacity:0,fillPattern:d.y.new(this._root,{width:3e3,height:100,angle:-45,gap:4,color:t.get("background")})}),i("Triangle",["progressgrip","gantt"]).setAll({draggable:!0,cursorOverStyle:"ew-resize",width:22,height:11,fill:t.get("background"),stroke:t.get("background"),strokeOpacity:0,fillOpacity:1,y:n.AQ,centerY:n.AQ}),i("Rectangle",["resizegrip","start","gantt"]).setAll({width:9,centerX:19,fill:t.get("background"),stroke:t.get("alternativeBackground"),fillPattern:d.y.new(this._root,{color:t.get("alternativeBackground"),colorOpacity:.2,rotation:90,gap:2}),draggable:!0,fillOpacity:0,strokeOpacity:0,cursorOverStyle:"ew-resize"}),i("Rectangle",["resizegrip","end","gantt"]).setAll({width:9,centerX:-10,fill:t.get("background"),stroke:t.get("alternativeBackground"),fillPattern:d.y.new(this._root,{color:t.get("alternativeBackground"),colorOpacity:.2,rotation:90,gap:2}),draggable:!0,fillOpacity:0,strokeOpacity:0,cursorOverStyle:"ew-resize"}),i("Line",["connectorline","gantt"]).setAll({strokeWidth:1,strokeDasharray:[2,2],strokeOpacity:1,stroke:t.get("alternativeBackground")}),i("Triangle",["connectorarrow","gantt"]).setAll({width:10,height:10,fill:t.get("alternativeBackground"),stroke:t.get("alternativeBackground"),rotation:90,centerX:n.CI,centerY:n.CI,fillOpacity:1,strokeOpacity:1}),i("Triangle",["link","start"]).setAll({forceHidden:!0}),i("Link",["gantt"]).setAll({toggleKey:"active",cursorOverStyle:"pointer"}),i("Link",["gantt"]).states.create("active",{}),i("Button",["secondary"]).setAll({height:35,marginLeft:6,tooltipX:(0,n.aQ)(90)}),i("Graphics",["icon","button","fixedwidth"]).setAll({x:n.CI,centerX:n.CI}),i("Button",["fixedwidth"]).setAll({width:35}),i("Button",["zoombutton","secondary"]).setAll({height:35,width:35,y:void 0,marginLeft:0,marginBottom:6,tooltipX:(0,n.aQ)(10)});{const e=i("Graphics",["icon","button","secondary"]);e.setAll({centerY:n.CI,y:n.CI}),(0,g.v)(e,"stroke",t,"secondaryButtonText")}{const e=i("Graphics",["icon","button","secondary"]);e.states.create("hover",{stroke:t.get("alternativeBackground")}),e.states.create("active",{stroke:t.get("alternativeBackground")})}{const e=i("RoundedRectangle",["background","secondary","button"]);(0,g.v)(e,"fill",t,"background"),(0,g.v)(e,"stroke",t,"secondaryButton")}i("RoundedRectangle",["background","secondary","button"]).states.create("hover",{strokeOpacity:1,fillOpacity:.2,fill:t.get("secondaryButtonHover")}),i("RoundedRectangle",["background","secondary","button"]).states.create("active",{strokeOpacity:1,fillOpacity:.2,fill:t.get("secondaryButtonActive")});{const e=i("RoundedRectangle",["background","secondary","button"]).states.create("down",{stateAnimationDuration:0});(0,g.v)(e,"fill",t,"secondaryButtonDown")}{const e=i("Graphics",["icon","secondary","button"]);(0,g.v)(e,"stroke",t,"secondaryButton")}i("Button",["taskbullet"]).setAll({centerX:n.CI,centerY:n.CI,y:n.CI,width:30,height:30,cursorOverStyle:"pointer"}),i("Graphics",["taskbullet","icon"]).states.create("default",{stateAnimationDuration:0}),i("Graphics",["taskbullet","icon"]).states.create("hover",{fill:t.get("secondaryButtonHover")}),i("Graphics",["taskbullet","icon"]).states.create("active",{fill:t.get("secondaryButton"),stateAnimationDuration:0,rotation:90}),i("Graphics",["taskbullet","icon"]).states.create("disabled",{marginLeft:3,stateAnimationDuration:0,fill:t.get("secondaryButton"),draw:e=>{e.moveTo(0,0),e.arc(0,0,4,0,360,!1)}}),i("RoundedRectangle",["button","taskbullet","background"]).setAll({opacity:0}),i("RoundedRectangle",["button","taskbullet","background"]).states.create("default",{opacity:0}),i("Button",["taskbullet"]).states.create("disabled",{stateAnimationDuration:0}),i("Graphics",["taskbullet","icon"]).setAll({fill:t.get("secondaryButton"),stateAnimationDuration:0,strokeOpacity:0,y:n.CI,draw:e=>{e.moveTo(-5,-8),e.lineTo(4,0),e.lineTo(-5,8),e.lineTo(-5,-8),e.closePath()}}),i("Button",["add"]).setAll({width:35,height:35,tooltipText:e.translateAny("Add task"),tooltipX:(0,n.aQ)(90)}),i("RoundedRectangle",["button","add","background"]).setAll({stroke:t.get("primaryButton"),strokeWidth:0}),i("Button",["edit"]).setAll({visible:!1,tooltipText:e.translateAny("Edit mode"),toggleKey:"active"});{const e=i("Graphics",["icon","edit","button"]);e.setAll({svgPath:"M 11 -1 L 17 5 L 8 14 L 2 14 L 2 8 L 11 -1 M 7 11 L 15 3 M 5 9 L 13 1 M 2 8 L 5 9 L 5 11 L 7 11 L 8 14 M 2 12 L 4 14"}),(0,g.v)(e,"stroke",t,"secondaryButton")}i("Button",["expand"]).setAll({tooltipText:e.translateAny("Expand all")});{const e=i("Graphics",["icon","expand","button"]);e.setAll({svgPath:"M -6 -4 L 0 2 L 6 -4 M -6 2 L 0 8 L 6 2"}),(0,g.v)(e,"stroke",t,"secondaryButton")}i("Button",["collapse"]).setAll({tooltipText:e.translateAny("Collapse all")});{const e=i("Graphics",["icon","collapse","button"]);e.setAll({svgPath:"M -6 6 L 0 0 L 6 6 M -6 0 L 0 -6 L 6 0"}),(0,g.v)(e,"stroke",t,"secondaryButton")}i("Button",["link"]).setAll({tooltipText:e.translateAny("Link new tasks"),toggleKey:"active"});{const e=i("Graphics",["icon","link","button"]);e.setAll({dy:1,svgPath:"M 5 4 L 13 4 C 17 4 17 11 13 11 L 8 11 C 4 11 4 18 8 18 L 16 18 L 14 16 L 14 20 L 16 18"}),(0,g.v)(e,"stroke",t,"secondaryButton")}i("Button",["clear"]).setAll({tooltipText:e.translateAny("Clear all")});{const e=i("Graphics",["icon","clear","button"]);e.setAll({marginLeft:1,marginRight:1,svgPath:"M 2.4 4 L 4.8 19.2 L 15.2 19.2 L 17.6 4 L 2.4 4 M 5.6 5.6 L 7.2 17.2 M 10 5.6 L 10 17.2 M 14.4 5.6 L 12.8 17.2 M 2.4 3.2 L 17.6 3.2 M 8.4 3.2 L 8.4 1.2 L 12 1.2 L 12 3.2"}),(0,g.v)(e,"stroke",t,"secondaryButton")}i("Button",["fit"]).setAll({tooltipText:e.translateAny("Fit to view")});{const e=i("Graphics",["icon","fit","button"]);e.setAll({svgPath:"M 8 0 L 2 0 M 6 -4 L 2 0 L 6 4 M -2 0 L -8 0 M -6 -4 L -2 0 L -6 4"}),(0,g.v)(e,"stroke",t,"secondaryButton")}i("Button",["zoomout"]).setAll({tooltipText:e.translateAny("Zoom out")});{const e=i("Graphics",["icon","zoomout","button"]);e.setAll({svgPath:"M 8 0 L 2 0 M 4 -4 L 8 0 L 4 4 M -2 0 L -8 0 M -4 -4 L -8 0 L -4 4"}),(0,g.v)(e,"stroke",t,"secondaryButton")}i("Button",["xbutton"]).setAll({width:35,height:35,centerX:n.CI,centerY:n.CI}),i("RoundedRectangle",["xbutton","background"]).setAll({fillOpacity:0,strokeOpacity:0}),i("Graphics",["xbutton","icon"]).setAll({fill:t.get("negative"),isMeasured:!1,forceInactive:!0,stroke:(0,p.$_)(16777215),strokeWidth:2,cursorOverStyle:"pointer",centerX:n.CI,centerY:n.CI,x:n.CI,y:n.CI,draw:e=>{e.arc(0,0,16,0,2*Math.PI),e.moveTo(-6,-6),e.lineTo(6,6),e.moveTo(6,-6),e.lineTo(-6,6)}}),i("ColorPickerButton").setAll({width:35,height:35,marginLeft:6,tooltipX:(0,n.aQ)(90),tooltipText:e.translateAny("Set color")})}}var f=i(7582),b=i(62),y=i(8777),x=i(2077),k=i(941),_=i(7144),w=i(5769),A=i(5812),I=i(8035),D=i(7142),C=i(3497),P=i(5071),T=i(7652),O=i(751),B=i(256),R=i(5040);class V extends b.d{constructor(){super(...arguments),Object.defineProperty(this,"_startBullet",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_endBullet",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gantt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_columnDragStartX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_columnDragStartY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hoveredDataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xPan",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_yPan",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"linksContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(y.W.new(this._root,{}))}),Object.defineProperty(this,"connectorLine",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(x.x.new(this._root,{themeTags:["connectorline"],visible:!1,forceInactive:!0}))}),Object.defineProperty(this,"connectorArrow",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(k.C.new(this._root,{themeTags:["connectorarrow"],visible:!1,forceInactive:!0}))}),Object.defineProperty(this,"links",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>A.r._new(this._root,{themeTags:T.mergeTags(this.containers.template.get("themeTags",[]),["link"])},[this.links.template]))))}),Object.defineProperty(this,"containers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>y.W._new(this._root,{position:"absolute",themeTagsSelf:["columncontainer"]},[this.containers.template]))))}),Object.defineProperty(this,"maskedContainers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>y.W._new(this._root,{position:"absolute",themeTagsSelf:["maskedcontainer"]},[this.maskedContainers.template]))))}),Object.defineProperty(this,"startBullets",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>I.C._new(this._root,{x:-1e3,themeTagsSelf:["connectorbullet","start"]},[this.startBullets.template]))))}),Object.defineProperty(this,"endBullets",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>I.C._new(this._root,{x:-1e3,themeTagsSelf:["connectorbullet","end"]},[this.endBullets.template]))))}),Object.defineProperty(this,"startGrips",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>D.A._new(this._root,{themeTagsSelf:["resizegrip","start"]},[this.startGrips.template]))))}),Object.defineProperty(this,"endGrips",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>D.A._new(this._root,{themeTagsSelf:["resizegrip","end"]},[this.endGrips.template]))))}),Object.defineProperty(this,"zeroRectangles",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>C.c._new(this._root,{themeTagsSelf:["zerorectangle"]},[this.zeroRectangles.template]))))}),Object.defineProperty(this,"progressRectangles",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>D.A._new(this._root,{themeTagsSelf:["progressrectangle"]},[this.progressRectangles.template]))))}),Object.defineProperty(this,"progressGrips",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>k.C._new(this._root,{themeTagsSelf:["progressgrip"]},[this.progressGrips.template]))))})}_afterNew(){this.fields.push("linkTo","categoryId"),this.valueFields.push("progress","duration"),this.set("exactLocationX",!0),super._afterNew(),this._disposers.push(this.events.on("globalpointermove",(e=>{if(this.connectorLine.isVisible()){const t=this.toLocal(e.point);this._updateConnector(t)}}))),this.events.on("globalpointerup",(e=>{this.connectorLine.isVisible()&&this._endConnector()})),this.columns.template.events.on("dragstart",(e=>{this._columnDragStartX=e.target.x(),this._columnDragStartY=e.target.y()})),this.columns.template.events.on("dragged",(e=>{this._handleColumnDragged(e)})),this.columns.template.events.on("dragstop",(e=>{const t=this.get("xAxis"),i=e.target.dataItem,s=i.get("openValueX",0);let a=t.positionToValue(t.coordinateToPosition(e.target.x()));const o=i.get("valueX",0);let n=a-s;i.set("openValueX",a),i.set("valueX",o+n),i.set("openValueXWorking",a),i.set("valueXWorking",o+n),this._fixValues(i,"duration"),this._moveChildValues(i,n)}))}roundValue(e,t){let i=this.gantt.get("snapThreshold",.8);t&&(i=1-i);const s=this.get("snapCount",1),a=this.get("xAxis").get("baseInterval");return m.roun(e+this.getUnitDuration()*i,a.timeUnit,a.count*s,this._root)}makeColumn(e,t){const i=super.makeColumn(e,t),s=this.get("yAxis");i.events.on("click",(()=>{s.selectDataItem(e.get("categoryAxisDataItem"))}));const a=this.mainContainer.children.push(this.containers.make());a._setDataItem(e),this.containers.push(a);const o=this.zeroRectangles.make();e.set("zeroRectangle",o),this.zeroRectangles.push(o),a.children.unshift(o),e.get("duration",0)>0&&o.hide(0);let n=0;o.events.on("pointerdown",(e=>{n=e.target.y(),i.dragStart(e)})),o.events.on("dragstart",(e=>{this._handleColumnDragged(e),e.target.setAll({x:0,y:n})})),o.events.on("dragged",(e=>{this._handleColumnDragged(e),e.target.setAll({x:0,y:n})})),o.events.on("dragstop",(e=>{i.dragStop(e)})),o.events.on("pointerover",(e=>{this._handleColumnHover(e)})),o.adapters.add("fillPattern",((e,t)=>t.dataItem.get("progress",0)<1?c.get("fillPattern"):e));const r=a.children.push(this.maskedContainers.make());e.setRaw("maskedContainer",r);const l=a.children.push(C.c.new(this._root,{fill:(0,p.$_)(16777215),forceInactive:!0,fillOpacity:0}));e.setRaw("mask",l),r.set("mask",l);const c=r.children.push(this.progressRectangles.make());this.progressRectangles.push(c);const h=this.progressGrips.make();this.progressGrips.push(h),r.children.push(h),h.events.on("dragged",(()=>{let t=h.x();t=O.fitToRange(t,0,i.getPrivate("width",0)),h.setAll({x:t,y:i.getPrivate("height",0)}),e.set("progress",h.x()/i.getPrivate("width",0))}));const d=this.startGrips.make();this.startGrips.push(d),a.children.push(d);const g=this.endGrips.make();this.endGrips.push(g),a.children.push(g),e.setRaw("startGrip",d),e.setRaw("endGrip",g);const u=this.get("xAxis");let m=0;d.events.on("dragstart",(()=>{m=i.x(),i.show(),o.hide(),r.show()})),d.events.on("pointerover",(()=>{i.states.applyAnimate("hover")})),d.events.on("pointerout",(()=>{i.isVisible()&&i.states.applyAnimate("default")})),d.events.on("dragged",(()=>{d.set("y",0);const t=d.x()+m;let i=u.positionToValue(u.coordinateToPosition(t)),s=this._findMinStart(e);i=Math.max(i,s),i=Math.min(i,e.get("valueX",i)),e.set("openValueX",i),d.set("x",0)})),d.events.on("dragstop",(()=>{this._fixValues(e,"end"),this.markDirtyValues()}));let v=0;g.events.on("dragstart",(()=>{v=i.x(),i.show(),o.hide(),r.show()})),g.events.on("pointerover",(()=>{i.states.applyAnimate("hover")})),g.events.on("pointerout",(()=>{i.isVisible()&&i.states.applyAnimate("default")})),g.events.on("dragged",(()=>{g.set("y",0);const t=g.x()+v;let i=u.positionToValue(u.coordinateToPosition(t));i=Math.max(i,e.get("openValueX",0)),e.set("valueX",i),e.set("valueXWorking",i);const s=e.get("graphics");s&&g.set("x",s.width())})),g.events.on("dragstop",(()=>{this._fixValues(e,"start"),this.markDirtyValues()}));const f=this.startBullets.make();f.events.on("pointerout",(()=>{i.isVisible()&&i.states.applyAnimate("default")})),this.startBullets.push(f),a.children.push(f);const b=this.endBullets.make();this.endBullets.push(b),a.children.push(b);const y=e=>{this._startConnector(e)};f.events.on("pointerdown",(()=>y(f))),b.events.on("pointerdown",(()=>y(b))),i.events.on("pointerover",(e=>{this._handleColumnHover(e)})),i.events.on("pointerout",(()=>{this._hoveredDataItem=void 0,this.connectorLine.isVisible()&&f.hide()})),e.setRaw("container",a),e.setRaw("startBullet",f),e.setRaw("endBullet",b),e.setRaw("progressRectangle",c),e.setRaw("progressGrip",h);const x=(e,t)=>{i.on(e,(i=>{t.set(e,i)}))};return x("x",a),x("y",a),x("dx",a),x("dy",a),x("cornerRadiusBL",l),x("cornerRadiusBR",l),x("cornerRadiusTL",l),x("cornerRadiusTR",l),this.isCollapsed(e)?(e.hide(0),i.hide(0),r.hide(0)):e.get("duration",0)>0&&(i.appear(),r.appear()),i}_handleColumnDragged(e){const t=e.target,i=t.dataItem;if(void 0!==this._columnDragStartY&&t.set("y",this._columnDragStartY),i&&void 0!==this._columnDragStartX){const e=t.x()-this._columnDragStartX;this._dragChildValues(i,e),this._updateLinks()}}_handleColumnHover(e){var t;if(!this.connectorLine.isVisible())return;const i=e.target.dataItem;if(!i)return;const s=i.get("startBullet"),a=null===(t=this._startBullet)||void 0===t?void 0:t.dataItem;s&&a&&this.getDepth(a)===this.getDepth(i)&&a!==i&&(s.show(),this._hoveredDataItem=i)}isCollapsed(e){const t=e.get("categoryAxisDataItem");if(t){const e=t.get("parent");if(e)return!!e.get("collapsed")||this.isCollapsed(e)}return!1}_updateChildren(){if(this._valuesDirty){this.setPrivateRaw("minX",void 0),this.setPrivateRaw("maxX",void 0);const e=this.get("yAxis"),t=e.get("renderer");P.each(this.dataItems,(t=>{const i=t.dataContext,s=t.get("categoryAxisDataItem");if(s){const a=t.get("children");a&&a.length>0?(t.set("openValueX",void 0),t.set("valueX",void 0),t.set("openValueXWorking",void 0),t.set("valueXWorking",void 0),delete i[this.get("openValueXField")],delete i[this.get("durationField")]):(i[this.get("openValueXField")]=t.get("openValueX"),i[this.get("durationField")]=t.get("duration"),i[this.get("progressField")]=t.get("progress")),i[this.get("linkToField")]=t.get("linkTo");const o=t.get("categoryY");i[this.get("categoryYField","category")]=o;const n=s.dataContext,r=e.get("categoryField","category"),l=s.get("parent");n[r]=o,l&&(n[e.get("parentIdField","parentId")]=l.get("id"),n[e.get("collapsedField","collapsed")]=s.get("collapsed",!1))}})),P.each(this.dataItems,(i=>{this._adjustParentValues(i);const s=i.get("children"),a=i.get("startGrip"),o=i.get("endGrip"),r=i.get("progressGrip");let l=!0;s&&s.length>0&&(l=!1),a&&a.setPrivate("visible",l),o&&o.set("visible",l),r&&r.set("visible",l);const c=i.get("categoryAxisDataItem");let h=0;if(c){const e=c.get("durationStepper");e&&e.set("disabled",!l),h=c.get("index",0)}const d=i.get("duration",0);let g=i.get("zeroRectangle");const u=i.get("graphics"),p=i.get("maskedContainer"),m=c.get("customColor",c.get("color"));if(g){let i=20,s=e.indexToPosition(h,0),a=e.indexToPosition(h,1);s=t.positionToCoordinate(s),a=t.positionToCoordinate(a);const o=u.get("height",0);let r=1;o instanceof n.gG&&(r*=o.value*O.cos(45)),i=(a-s)*r;const l=u.get("maxHeight",1/0)*O.cos(45),c=u.get("minHeight",0)*O.cos(45);i=O.fitToRange(i,c,l),g.setPrivate("height",i),g.setPrivate("width",i)}u&&p&&!this.isCollapsed(i)&&(0===d&&g?u.isHidden()||u.isHiding()||(g.setAll({fill:m,stroke:m}),(null==a?void 0:a.isDragging())||(null==o?void 0:o.isDragging())||(u.hide(),p.hide(),g.show())):(g&&g.hide(),u.show(),p.show()))})),P.each(this.dataItems,(e=>{this._adjustLinkValues(e)})),P.each(this.dataItems,(e=>{this._adjustParentValues(e);const t=e.get("categoryAxisDataItem");t&&(t.set("duration",e.get("duration")),t.set("progress",e.get("progress")))}));const i="valueschanged";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this})}super._updateChildren(),this._columnsUpdated&&this._updateLinks()}_getParentOpen(e){const t=e.get("parent");return t?this._getParentOpen(t):e.get("openValueX",-1/0)}_adjustLinkValues(e){const t=e.get("linkTo");if(t){const i=e.get("valueX",0);P.each(t,(t=>{const s=this.getDataItemById(t);if(s&&s!==e){const e=s.get("openValueX",0);void 0!==e&&e<i&&(s.set("openValueX",i),this._fixValues(s,"duration"),this._adjustChildValues(s))}}))}}_adjustChildValues(e){const t=e.get("children",[]);if(t&&t.length>0){let i=e.get("openValueX",0);P.each(t,(e=>{const t=e.get("openValueX",0);(void 0===t||t<i)&&(e.set("openValueX",i),this._fixValues(e,"duration")),this._adjustChildValues(e)}))}}_dragChildValues(e,t){const i=e.get("children");i&&i.length>0&&P.each(i,(e=>{const i=e.get("graphics");i&&i.set("dx",t),this._dragChildValues(e,t)}))}_moveChildValues(e,t){const i=e.get("children");i&&i.length>0&&P.each(i,(e=>{e.set("openValueX",e.get("openValueX",0)+t),e.set("valueX",e.get("valueX",0)+t),e.set("openValueXWorking",e.get("openValueX")),e.set("valueXWorking",e.get("openValueX"));const i=e.get("graphics");i&&i.set("dx",0),this._fixValues(e,"duration"),this._moveChildValues(e,t)}))}_findMinStart(e){let t=-1/0;P.each(this.dataItems,(i=>{const s=i.get("linkTo");s&&P.each(s,(s=>{if(s===e.get("id")){const e=i.get("valueX",0);e>t&&(t=e)}}))}));const i=e.get("parent");return i&&(t=Math.max(t,this._findMinStart(i))),t}_adjustParentValues(e){const t=e.get("categoryAxisDataItem");if(t){const i=e.get("graphics");let s=t.get("customColor",t.get("color"));i&&i.setAll({fill:s,stroke:s});const a=e.get("zeroRectangle");a&&a.setAll({fill:s,stroke:s});const o=e.get("children");if(o&&o.length>0){let t=0;P.each(o,(e=>{const i=e.get("progress",0);void 0!==i&&(t+=i)})),t/=o.length,e.set("progress",t)}if(t){let t=e.get("valueX"),i=e.get("openValueX");const s=e.get("duration",0);void 0===t&&void 0!==i&&(i=this.getOpenValue(i),t=this.getEndValue(i,s),e.setRaw("openValueX",i),e.setRaw("valueX",t));let a=e.get("parent");if(void 0!==i&&void 0!==t&&a){const e=a.get("openValueX"),s=a.get("valueX");(void 0===e||e>i)&&a.set("openValueX",i),(void 0===s||s<t)&&(a.set("valueX",t),a.set("valueXWorking",t)),a.set("duration",this.getDataItemDuration(a)),this._adjustParentValues(a)}}}}_startConnector(e){var t,i,s,a;this._startBullet=e,this.connectorLine.show(),this.connectorArrow.show(),this._xPan=null===(t=this.chart)||void 0===t?void 0:t.get("panX"),this._yPan=null===(i=this.chart)||void 0===i?void 0:i.get("panY"),null===(s=this.chart)||void 0===s||s.set("panX",!1),null===(a=this.chart)||void 0===a||a.set("panY",!1);const o=e.dataItem,n=this.getDepth(o),r=[];P.each(this.dataItems,(e=>{this.getDepth(e)!=n&&P.move(r,e);const t=o.get("links");t&&t[e.get("id")]&&P.move(r,e)}));const l=o.get("parent");l&&P.each(this.dataItems,(e=>{e.get("parent")!==l&&P.move(r,e)}));const c=o.get("id"),h=e=>{P.each(this.dataItems,(t=>{const i=t.get("links");i&&i[e]&&(r.push(t),h(t.get("id")))}))};h(c),P.each(r,(e=>{const t=e.get("graphics");t&&t.states.applyAnimate("disabled");const i=e.get("container");i&&i.states.applyAnimate("disabled");const s=e.get("zeroRectangle");s&&s.states.applyAnimate("disabled")}))}_updateConnector(e){var t;let i=null===(t=this._startBullet)||void 0===t?void 0:t.toGlobal({x:0,y:0});i&&(i=this.toLocal(i),this.connectorLine.setAll({segments:[[[{x:i.x,y:i.y},{x:e.x,y:e.y}]]]}),this.connectorArrow.setAll({x:e.x,y:e.y,rotation:O.getAngle(i,e)+90}))}_endConnector(){var e,t,i,s,a;let o=null===(e=this._startBullet)||void 0===e?void 0:e.toGlobal({x:0,y:0});if(o){o=this.toLocal(o),this.connectorLine.hide(),this.connectorArrow.hide(),P.each(this.dataItems,(e=>{const t=e.get("graphics");t&&t.isVisible()&&t.states.applyAnimate("default");const i=e.get("container");i&&i.isVisible()&&i.states.applyAnimate("default");const s=e.get("zeroRectangle");s&&s.isVisible()&&s.states.applyAnimate("default")}));let e=this._hoveredDataItem;if(e&&e!==(null===(t=this._startBullet)||void 0===t?void 0:t.dataItem)){const t=e.get("id");if(t){const e=null===(i=this._startBullet)||void 0===i?void 0:i.dataItem;if(e){const i=e.get("linkTo",[]);-1===P.indexOf(i,t)&&(i.push(t),e.set("linkTo",i),this.markDirtyValues())}}}this._updateLinks()}this.endBullets.each((e=>{e.show()})),this.startBullets.each((e=>{e.hide()})),null===(s=this.chart)||void 0===s||s.set("panX",this._xPan),null===(a=this.chart)||void 0===a||a.set("panY",this._yPan)}_fixValues(e,t){let i=e.get("valueX"),s=e.get("openValueX"),a=e.get("duration",0);if(R.isNumber(i)&&R.isNumber(s)){"start"===t?(i=this.roundValue(i),a=this.getDataItemDuration(e),e.set("duration",a)):"end"===t?(s=this.roundValue(s,!0),a=this.getDataItemDuration(e),e.set("duration",a)):"duration"===t&&(s=this.roundValue(s,!0),i=s+a*this.getUnitDuration()),s=this.getOpenValue(s),i=this.getEndValue(s,a);const o=this.get("interpolationDuration",0),n=this.get("interpolationEasing"),r=this.dataItems.indexOf(e);r>=this.startIndex()&&r<=this.endIndex()?(e.animate({key:"openValueXWorking",to:s,duration:o,easing:n}),e.animate({key:"valueXWorking",to:i,duration:o,easing:n}),e.animate({key:"openValueX",to:s,duration:o,easing:n}),e.animate({key:"valueX",to:i,duration:o,easing:n})):(e.set("openValueXWorking",s),e.set("valueXWorking",i),e.set("openValueX",s),e.set("valueX",i))}}_toggleColumn(e,t){super._toggleColumn(e,t);const i=e.get("container");i&&i.setPrivate("visible",t)}_afterDataChange(){const e=this.get("yAxis");P.each(this.dataItems,(t=>{this._fixValues(t,"duration");const i=t.get("categoryY");if(i){const s=e.dataItems.find((e=>e.get("category")===i));t.set("categoryAxisDataItem",s),s&&s.on("duration",(()=>{const e=s.get("duration"),i=t.get("children");i&&0!==i.length||void 0!==e&&(t.set("duration",e),this._fixValues(t,"duration"))}))}})),this.get("yAxis").markDirtyTree(),super._afterDataChange()}_updateLinks(){const e=this.get("xAxis"),t=this.get("yAxis"),i=t.get("renderer");let s=0;const a=this.endBullets.getIndex(0);a&&a.isVisible()&&(s=a.get("radius",0));let o=(0,n.aQ)(60),r=0,l=1/0,c=this.columns.getIndex(0),h=1;if(c){o=c.get("height",0);const e=O.cos(45);o instanceof n.gG&&(h=o.value*e*e),r=c.get("minHeight",0)*e*e,l=c.get("maxHeight",1/0)*e*e}P.each(this.dataItems,(a=>{const o=a.get("linkTo"),n=a.get("categoryAxisDataItem");if(o){let c=a.get("links");const d=this.get("linkHorizontalOffset",25);P.each(o,(g=>{c||(c=a.set("links",{}));let u=c[g];u||(u=this.links.make(),c[g]=u,this.links.push(u),this.linksContainer.children.push(u),u.appear(),u.events.on("click",(()=>{if(u.get("active")){this.links.removeValue(u);const e=a.get("links");e&&delete e[g],P.remove(o,g),this.markDirtyValues(),u.dispose()}})),u.events.on("globalpointerup",(()=>{u.get("active")&&!u.isHover()&&u.set("active",!1)})));const p=[],m=e.valueToPosition(a.get("valueX",0)),v=t.categoryToPosition(a.get("categoryY")),f=this.getPoint(m,v);let b={x:f.x+s,y:f.y};if(0===a.get("duration",0)){let e=t.indexToPosition(n.get("index",0),0),a=t.indexToPosition(n.get("index",0),1);e=i.positionToCoordinate(e),a=i.positionToCoordinate(a);let o=(a-e)*h;o=O.fitToRange(o,r,l),b.x+=o-s}p.push(b),p.push({x:b.x+d,y:b.y});const y=this.getDataItemById(g);if(y){const s=e.valueToPosition(y.get("openValueX",0)),o=t.categoryToPosition(y.get("categoryY")),n=this.getPoint(s,o);let c={x:n.x,y:n.y};if(0===y.get("duration",0)){let e=y.get("categoryAxisDataItem");if(e){let s=t.indexToPosition(e.get("index",0),0),a=t.indexToPosition(e.get("index",0),1);s=i.positionToCoordinate(s),a=i.positionToCoordinate(a);let o=(a-s)*h;o=O.fitToRange(o,r,l),c.x-=o}}if(c.x-d<b.x+d){const e=a.get("categoryY"),t=this.get("yAxis");if(e){let i=t.categoryToIndex(e);const s=t.indexToPosition(i),a=t.indexToPosition(i,1);if(t&&e){let i=-1;c.y>b.y&&(i=1);let o=t.get("renderer").positionToCoordinate(t.categoryToPosition(e)+(a-s)*i);p.push({x:b.x+d,y:o})}}}p.push({x:c.x-d,y:c.y}),p.push(c)}u.set("points",p)}))}}))}_updateSeriesGraphics(e,t,i,s,a,o,n,r){super._updateSeriesGraphics(e,t,i,s,a,o,!1,r);let l=e.get("left",0),c=e.get("top",0),h=e.get("right",0)-l,d=e.get("bottom",0)-c;const g=e.get("container"),u=e.get("mask"),p=e.get("categoryAxisDataItem"),m=p?p.get("customColor",p.get("color")):void 0;e.setRaw("name",p.dataContext.name);const v=e.get("startBullet");null==v||v.setAll({x:0,stroke:m});const f=e.get("endBullet");null==f||f.setAll({stroke:m,x:h}),g&&g.setAll({x:l,y:c,width:h,height:d});const b=e.get("maskedContainer");b&&b.setAll({x:0,y:0,width:h,height:d}),u&&u.setAll({x:0,y:0,width:h,height:d});const y=e.get("startGrip");y&&y.setAll({height:d});const x=e.get("endGrip");x&&x.setAll({x:h,height:d});const k=e.get("progressRectangle");if(k){const t=h-h*e.get("progress",0);k.setAll({x:h-t,width:t,height:d});const i=e.get("progressGrip");i&&i.setAll({x:h-t});const s=e.get("zeroRectangle");s&&s.markDirtyKey("fillPattern")}}hideDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,f.mG)(this,void 0,void 0,(function*(){const s=[i.hideDataItem.call(this,e,t)],a=e.get("container");a&&s.push(a.hide(t));const o=e.get("links",{});o&&B.each(o,((e,i)=>{i.hide(t)}));const n=e.get("id");n&&P.each(this.dataItems,(e=>{const i=e.get("linkTo");if(i&&i.includes(n)){const i=e.get("links");i&&i[n]&&i[n].hide(t)}})),yield Promise.all(s)}))}showDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,f.mG)(this,void 0,void 0,(function*(){const s=[i.showDataItem.call(this,e,t)],a=e.get("container");a&&s.push(a.show(t));const o=e.get("links",{});o&&B.each(o,((e,i)=>{i.show(t)}));const n=e.get("id");n&&P.each(this.dataItems,(e=>{const i=e.get("linkTo");if(i&&i.includes(n)){const i=e.get("links");i&&i[n]&&i[n].show(t)}})),yield Promise.all(s)}))}disposeDataItem(e){super.disposeDataItem(e);const t=e.get("container");t&&(this.containers.removeValue(t),t.dispose());const i=e.get("startBullet");i&&(this.startBullets.removeValue(i),i.dispose());const s=e.get("endBullet");s&&(this.endBullets.removeValue(s),s.dispose());const a=e.get("startGrip");a&&(this.startGrips.removeValue(a),a.dispose());const o=e.get("endGrip");o&&(this.endGrips.removeValue(o),o.dispose());const n=e.get("progressRectangle");n&&(this.progressRectangles.removeValue(n),n.dispose());const r=e.get("zeroRectangle");r&&(this.zeroRectangles.removeValue(r),r.dispose());const l=e.get("progressGrip");l&&(this.progressGrips.removeValue(l),l.dispose()),this.disposeLinks(e)}disposeLinks(e){const t=e.get("links",{});t&&(B.each(t,((e,i)=>{i.dispose(),delete t[e]})),e.set("linkTo",[]));const i=e.get("id","");i&&P.each(this.dataItems,(e=>{const t=e.get("linkTo");if(t&&t.includes(i)){P.remove(t,i);const s=e.get("links");if(s&&s[i]){const e=s[i];this.links.removeValue(e),delete s[i],e.dispose()}}}))}getDataItemDuration(e){const t=e.get("openValueX",0);let i=e.get("valueX",0);return Math.round((i-t)/this.getUnitDuration())-this.getHolidayCount(t,i)}getDepth(e){let t=0,i=e.get("parent");for(;i;)t++,i=i.get("parent");return t}getEndValue(e,t){let i=t;const s=this.getUnitDuration();if(this.gantt.get("excludeWeekends",!0))for(let t=0;t<i;t++)this.isHoliday(e+t*s)&&i++;return e+i*s}getOpenValue(e){if(this.gantt.get("excludeWeekends",!0))for(;this.isHoliday(e);)e+=this.getUnitDuration();return e}getUnitDuration(){return m.getDuration(this.gantt.get("durationUnit","day"))}getHolidayCount(e,t){let i=0,s=!0;for(let a=t;a>=e;a-=this.getUnitDuration())this.isHoliday(a)?!s&&this.isHoliday(a)&&i++:s=!1;return i}isHoliday(e){if(this.gantt.get("excludeWeekends",!0)){const t=this.gantt.get("holidays",[]),i=this.gantt.get("weekends",[0,6]),s=new Date(e);if(i.includes(s.getDay()))return!0;if(t&&t.length>0){let i=!1;return P.eachContinue(t,(t=>{if(t instanceof Date){const s=t.getTime(),a=t.getTime()+m.getDuration("day");if(e>=s&&e<a)return i=!0,!1}return!0})),i}}return!1}}Object.defineProperty(V,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GanttSeries"}),Object.defineProperty(V,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.d.classNames.concat([V.className])});var S=i(6001),L=i(2876),X=i(7497);class G extends X.${constructor(){super(...arguments),Object.defineProperty(this,"_downX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downW",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xHideDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_insertAfter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_makeChildOf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_draggedItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_previousTick",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_delDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_firstDataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_updDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dataChangeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_treeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"gantt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"xButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(s.z.new(this._root,{themeTags:["xbutton"],icon:o.T.new(this._root,{themeTags:["icon"]})}))})}_afterNew(){this.fields.push("parentId","collapsed","name"),super._afterNew(),this.events.on("wheel",(e=>{this.chart.handleWheel(e)})),this.xButton.hide(0);const e=this.get("renderer");this._firstDataItem=this.makeDataItem({cellSize:1e-4}),e.makeTick(this._firstDataItem,[]).set("dy",.5),e.makeGrid(this._firstDataItem,[]).set("dy",.5),this.labelsContainer.setAll({maskContent:!0});const t=this.children.push(D.A.new(this._root,{themeTags:["axisresizer"]}));t.events.on("pointerdown",(e=>{this._downX=this.toLocal(e.point).x,this._downW=this.width()})),t.events.on("globalpointermove",(e=>{if(void 0!==this._downX){const t=this.toLocal(e.point).x-this._downX;if(void 0!==this._downW){let e=this._downW+t;e=Math.max(e,this.get("minWidth",100)),this.labelsContainer.set("width",e)}}})),t.events.on("globalpointerup",(()=>{this._downX=void 0}));const i=e.containers.template;i.events.on("dragged",(t=>{var i,a;this.xButton.hide(0);const o=t.target.dataItem,n=t.target;if(o){const r=(t.target.y()-s)/this.chart.plotContainer.height()*(this.get("end",1)-this.get("start",0));o.set("deltaPosition",r);const l=(e,t)=>{const i=e.get("children");i&&P.each(i,(e=>{e.set("deltaPosition",t),l(e,t)}))};l(o,r);const c=o.get("tick"),h=o.get("grid"),d=Math.ceil(s-n.y());if(c){const t=o.get("children");t&&0!=t.length||(c.set("dy",d),h&&h.set("dy",d));const s=n.y(),r=e.containers;this._makeChildOf&&(null===(a=null===(i=this._makeChildOf.get("container"))||void 0===i?void 0:i.get("background"))||void 0===a||a.unhover()),this._makeChildOf=void 0;for(let e=0;e<r.length;e++){const t=r.getIndex(e);if(t&&t.isVisible()&&t!==n){const e=t.dataItem;if(e.get("cellSize",0)>0){const i=e.get("children");if(i&&-1!==i.indexOf(o))continue;const a=t.get("background");if(a){const i=t.y();Math.abs(s+n.height()/2-(i+t.height()/2))<5&&(a.hover(),this._makeChildOf=e)}}}}if(this._makeChildOf)this._previousTick&&(this._previousTick.unhover(),this._previousTick=void 0);else{let t;this._previousTick&&(this._previousTick.states.applyAnimate("default"),this._previousTick=void 0);let i=1/0;for(let a=e.ticks.length;a>=0;a--){const o=e.ticks.getIndex(a);if(o&&c.isVisible()){const e=o.dataItem;if(e){const a=e.get("index",0);if(a>=this.startIndex()&&a<=this.endIndex()){if(0==e.get("cellSize",0))continue;let a=!1,r=e.get("parent");for(;r;){if(r===e){a=!0;break}r=r.get("parent")}if(a)continue;const l=Math.abs(o.y()+o.get("dy",0)-s-n.height()/2);l<i&&(i=l,t=o.dataItem)}}}}if(Math.abs(d)<10&&(t=void 0,this._insertAfter=void 0),t&&t!==o){let e=!1,i=t.get("parent");for(;i;){if(i===o){e=!0;break}i=i.get("parent")}if(e)return;const s=t.get("tick");s&&(s.hover(),this._previousTick=s),this._insertAfter=t}}}}})),i.events.on("dragstop",(e=>{var t,i;this._draggedItem=e.target.dataItem,this._sortCategoryAxis(),this._makeChildOf&&(null===(i=null===(t=this._makeChildOf.get("container"))||void 0===t?void 0:t.get("background"))||void 0===i||i.unhover(),this._makeChildOf.get("collapsed")&&this.toggleCollapse(this._makeChildOf,!0),this._updateCellSizes()),this.get("renderer").containers.each((e=>{e.set("forceInactive",!1)}))}));let s=0;i.events.on("dragstart",(e=>{this.get("renderer").containers.each((e=>{e.set("forceInactive",!0)})),s=e.target.y()}))}_changed(){super._changed(),this.isDirty("selectedDataItem")&&this.selectDataItem(this.get("selectedDataItem"))}_processBullet(e){var t,i,s;super._processBullet(e);const a=e.get("parent");a&&a.get("collapsed")&&(null===(t=e.get("container"))||void 0===t||t.hide(),null===(i=e.get("tick"))||void 0===i||i.hide(),null===(s=e.get("grid"))||void 0===s||s.hide(),e.set("finalCellSize",0))}_updateChildren(){super._updateChildren(),this._dataChanged&&(P.each(this.dataItems,(e=>{var t;if(!e.get("parentId")){let i=e.get("customColor",e.get("color"));const s=e.dataContext;void 0===i&&s&&void 0!==s.color&&(i=(0,p.$_)(s.color)),i||(i=null===(t=this.gantt)||void 0===t?void 0:t._nextColor()),e.setRaw("color",i)}})),P.each(this.dataItems,(e=>{const t=e.get("parentId");if(t){const i=this.getDataItemById(t);if(i){e.setRaw("parent",i),e.setRaw("cellSize",Math.pow(this.get("childCellSize",1),this._getItemDepth(e))),e.setRaw("finalCellSize",e.get("cellSize"));let t=e.get("customColor",e.get("color"));const s=e.dataContext;void 0===t&&s&&void 0!==s.color&&(t=(0,p.$_)(s.color)),null==t?e.setRaw("color",i.get("customColor",i.get("color"))):e.setRaw("color",t);let a=i.get("children");a||(a=[],i.set("children",a)),P.move(a,e)}}else e.setRaw("cellSize",1),e.setRaw("finalCellSize",1)})),P.each(this.dataItems,(e=>{this.toggleCollapse(e,e.get("collapsed",!1),0)}))),this._treeDirty&&this._updateTree();const e=this.get("renderer"),t=this._firstDataItem;t&&(e.updateTick(t.get("tick"),0),e.updateGrid(t.get("grid"),0)),P.each(this.dataItems,(t=>{const i=t.get("progressPie");if(i){const e=t.get("progress",0);i.set("value",e);const s=t.get("customColor",t.get("color"));t.dataContext.color=null==s?void 0:s.toString(),i.slice.set("fill",s),i.backgroundSlice.set("fill",s),i.label.set("fill",s)}const s=t.get("cellSize",1),a=t.get("container");if(a){s<1e-4?a.setPrivate("visible",!1):a.setPrivate("visible",!0);const i=t.get("index",0),o=this.indexToPosition(i,0),n=this.indexToPosition(i,1),r=e.positionToCoordinate(o),l=e.positionToCoordinate(n);a.set("height",Math.abs(l-r))}}))}_clearDirty(){super._clearDirty(),this._treeDirty=!1}getSeriesDataItem(e){if(e.get("seriesDataItem"))return e.get("seriesDataItem");const t=this.gantt;if(t){const i=t.series.getDataItemById(e.get("id"));if(i)return e.set("seriesDataItem",i),i}}zoom(e,t,i){if(this.get("zoomable",!0))if(this._updateFinals(e,t),this.get("start")!==e||this.get("end")!=t){let s=this._sAnimation,a=this._eAnimation;e>t&&([e,t]=[t,e]);let o=this.get("maxDeviation",.5)*Math.min(1,t-e);if(e<-o&&(e=-o),t>1+o&&(t=1+o),R.isNumber(i)||(i=this.get("interpolationDuration",0)),(s&&s.playing&&s.to==e||this.get("start")==e)&&(a&&a.playing&&a.to==t||this.get("end")==t))return;if(i>0){let s,a,o=this.get("interpolationEasing");if(this.get("start")!=e&&(s=this.animate({key:"start",to:e,duration:i,easing:o})),this.get("end")!=t&&(a=this.animate({key:"end",to:t,duration:i,easing:o})),this._sAnimation=s,this._eAnimation=a,s)return s;if(a)return a}else this.set("start",e),this.set("end",t),this.root.events.once("frameended",(()=>{this.markDirtyKey("start")}))}else this._sAnimation&&this._sAnimation.stop(),this._eAnimation&&this._eAnimation.stop()}_afterDataChange(){super._afterDataChange();const e=this.chart;if(e){const t=e.plotContainer.height(),i=this.get("minCellHeight",70),s=Math.floor(t/i);this.set("maxZoomCount",s),this.set("minZoomCount",s),0==this.get("start")&&1==this.get("end")&&(this.zoomToIndexes(0,s),this._dataChangeDp&&this._dataChangeDp.dispose(),this._dataChangeDp=this.root.events.once("frameended",(()=>{this.adjustZoom()})))}}markDirtyTree(){this._treeDirty=!0,this.markDirty()}_sortCategoryAxis(){var e;let t=this._insertAfter;const i=this._draggedItem;if(this._previousTick&&(this._previousTick.states.applyAnimate("default"),this._previousTick=void 0),!i)return;const s=i.get("parent"),a=this._getItemDepth(i);if(this._makeChildOf){if(this._makeChildOf&&i!==this._makeChildOf){i.set("parent",this._makeChildOf);let e=this._makeChildOf.get("children");if(e||(e=this._makeChildOf.set("children",[])),e&&!e.includes(i)&&e.unshift(i),!i.get("customColor")){const e=this._makeChildOf.get("customColor",this._makeChildOf.get("color"));i.setRaw("color",e)}const t=this.getSeriesDataItem(this._makeChildOf);t&&t.setAll({openValueX:void 0,valueX:void 0,duration:i.get("duration",0)})}t=this._makeChildOf}else if(t&&i!==t){const e=t.get("children"),s=t.get("parent");if(e&&e.length>0&&!t.get("collapsed",!1))i.set("parent",t);else if(s){const a=s.get("children");if(a)if(t==a[a.length-1])if(i.get("parent")===s);else{const e=s.get("parent");e?e.get("children")&&i.set("parent",e):void 0!==i.get("parent")&&(i.set("parent",void 0),this._setNewColor(i))}else e&&!t.get("collapsed",!1)?i.set("parent",t):i.set("parent",s)}else void 0!==i.get("parent")&&(i.set("parent",void 0),this._setNewColor(i));const a=i.get("parent");if(a){if(!i.get("customColor")){const e=a.get("customColor",a.get("color"));i.setRaw("color",e)}const e=a.get("children");e&&(-1!==e.indexOf(t)?P.move(e,i,e.indexOf(t)+1):a==t?e.unshift(i):e.push(i))}}if(s&&s!=i.get("parent")){const e=s.get("children");e&&-1!==e.indexOf(i)&&P.remove(e,i)}if(t){const s=this.dataItems.indexOf(t),o=this.dataItems.indexOf(i),n=(e,t)=>{if(o>=s){t++,P.move(this.dataItems,e,t);const i=e.get("children");i&&P.eachReverse(i,(e=>{n(e,t)}))}else{P.move(this.dataItems,e,t);const i=e.get("children");i&&P.each(i,(e=>{n(e,t)}))}};if(this._getItemDepth(i)!=a){const t=this.getSeriesDataItem(i);t&&(null===(e=this.gantt)||void 0===e||e.series.disposeLinks(t))}n(i,s)}this.markDirtyTree();const o=this.get("interpolationEasing"),n=this.get("interpolationDuration",0);P.each(this.dataItems,((e,t)=>{var i,s;const a=e.get("container");if(a){let r=this.coordinateToPosition(a.y()+a.height()/2),l=this.indexToPosition(t)-e.get("deltaPosition",0)-r;e.set("deltaPosition",-l),e.animate({key:"deltaPosition",to:0,duration:n,easing:o}),null===(i=e.get("tick"))||void 0===i||i.animate({key:"dy",to:0,duration:n,easing:o}),null===(s=e.get("grid"))||void 0===s||s.animate({key:"dy",to:0,duration:n,easing:o})}}))}_setNewColor(e,t){var i;t||(t=null===(i=this.gantt)||void 0===i?void 0:i._nextColor()),e.set("color",t);const s=e.get("children");s&&s.length>0&&P.each(s,(e=>{this._setNewColor(e,t)}))}_updateTree(){const e=this.gantt;e&&(P.each(e.series.dataItems,(e=>{e.set("children",[]),e.set("parent",void 0)})),P.each(this.dataItems,(t=>{const i=t.get("parent");if(i){const s=t.get("id"),a=i.get("id"),o=e.series.getDataItemById(s);t.set("parentId",a);const n=e.series.getDataItemById(a);if(o&&n){o.set("parent",n);let e=n.get("children",[]);P.move(e,o)}}})),P.each(e.series.dataItems,(e=>{const t=e.get("children"),i=e.get("startGrip"),s=e.get("endGrip");i&&s&&(t&&0!==t.length?(i.set("forceHidden",!0),s.set("forceHidden",!0)):(i.set("forceHidden",!1),s.set("forceHidden",!1)))})),this.data.values.length=0,e.series.data.values.length=0,P.each(this.dataItems,((t,i)=>{t.setRaw("index",i),this.data.values.push(t.dataContext);const s=this.getSeriesDataItem(t);s&&(e.series.data.values.push(null==s?void 0:s.dataContext),P.move(e.series.dataItems,s))})),this._updateCellSizes(),P.each(this.dataItems,(e=>{this._updateBullet(e)})))}_updateCellSizes(e){P.each(this.dataItems,(t=>{void 0===e&&(e=this.get("interpolationDuration",0));const i=this._getItemDepth(t);let s=this.get("childCellSize",1);const a=t.get("parent");a&&a.get("collapsed",!1)&&(s=0),s=Math.pow(s,i),t.get("deleting")&&(s=0),t.get("cellSize",1)!=s&&(t.set("finalCellSize",s),t.animate({key:"cellSize",to:s,duration:e,easing:this.get("interpolationEasing")}))})),this._dataChangeDp&&this._dataChangeDp.dispose(),this._dataChangeDp=this.root.events.once("frameended",(()=>{this.adjustZoom()}))}_updateBullet(e){const t=e.get("taskBullet");if(t){const i=this._getItemDepth(e),s=e.get("children");t.setAll({marginLeft:this.get("childShift",20)*i});const a=e.get("collapsed",!1),o=t.get("icon");let n=!1;s&&s.length>0&&(n=!0),o&&(n?(t.set("disabled",!1),this.root.events.once("frameended",(()=>{t.set("active",!a)}))):t.set("disabled",!0))}}toggleCollapse(e,t,i){if(e&&e.get("collapsed",!1)!==t){const s=e.get("children");e.set("collapsed",t),s&&s.length>0&&P.each(s,(e=>{const s=e.get("container"),a=e.get("grid"),o=e.get("tick");s&&(t?(s.hide(),a.hide(),o.hide()):(s.show(),a.show(),o.show()));const n=this.gantt;if(n&&n.series){const i=n.series.dataItems.find((t=>t.get("categoryY")===e.get("category")));i&&(t?i.hide():i.show())}this.toggleCollapse(e,t,i)})),this._updateBullet(e),this._updDP&&this._updDP.dispose(),this._updDP=this.root.events.once("frameended",(()=>{this._updateCellSizes(i)}))}}expandAll(){P.each(this.dataItems,(e=>{e.get("collapsed",!1)&&this.toggleCollapse(e,!1)}))}collapseAll(){P.each(this.dataItems,(e=>{e.get("collapsed",!1)||this.toggleCollapse(e,!0)}))}deleteAll(){var e;this.data.clear(),null===(e=this.gantt)||void 0===e||e.series.data.clear(),this.selectDataItem(void 0)}deleteDataItem(e,t){var i;const s=null===(i=this.gantt)||void 0===i?void 0:i.series,a=e.get("children");if(a&&a.length>0)for(let e=a.length-1;e>=0;e--)this.deleteDataItem(a[e],!0);e.set("deleting",!0),t||this._updateCellSizes();const o=e.get("container");let n;o&&o.hide().then((()=>{s&&n&&(s.setPrivate("minX",void 0),s.setPrivate("maxX",void 0),s.data.removeValue(n.dataContext)),this.data.removeValue(e.dataContext)})),s&&(n=this.getSeriesDataItem(e),n&&n.hide())}toggleProgressPie(e,t){if(e){const i=e.get("children");if(i&&i.length>0){let t;1!==e.get("progress",0)&&(t=1),P.each(i,(e=>{this.toggleProgressPie(e,t)}))}else{const i=this.getSeriesDataItem(e);if(i){const e=i.get("progress",0),s=i.get("prevProgress",0);let a=1;1==e&&null!=s&&(a=s),void 0!==t&&(a=t),i.set("prevProgress",e),i.animate({key:"progress",to:a,duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})}}}}setDataItemColor(e,t){var i;if(e){const s=e.get("color");t&&s&&t.hex===s.hex&&(t=void 0),e.set("customColor",t);const a=e.get("children");a&&a.length>0&&P.each(a,(e=>{this.setDataItemColor(e,t)})),null===(i=this.gantt)||void 0===i||i.series.markDirtyValues()}}hideDataItem(e){const t=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,f.mG)(this,void 0,void 0,(function*(){const i=t.hideDataItem.call(this,e),s=e.get("container");return s&&s.hide(),i}))}showDataItem(e){const t=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,f.mG)(this,void 0,void 0,(function*(){const i=t.showDataItem.call(this,e),s=e.get("container");return s&&s.show(),i}))}_toggleFHDataItem(e,t){const i=e.get("container");i&&i.set("forceHidden",t)}_toggleDataItem(e,t){super._toggleDataItem(e,t);const i=e.get("container");i&&i.set("visible",t)}disposeDataItem(e){super.disposeDataItem(e);const t=this.get("renderer"),i=e.get("container");i&&(t.containers.removeValue(i),i.dispose());const s=e.get("progressPie");s&&(t.progressPies.removeValue(s),s.dispose());const a=e.get("grip");a&&(t.grips.removeValue(a),a.dispose());const o=e.get("durationStepper");o&&(t.durationSteppers.removeValue(o),o.dispose());const n=e.get("taskBullet");n&&(t.taskBullets.removeValue(n),n.dispose());const r=e.get("parent");if(r){const t=r.get("children");t&&P.remove(t,e),this._updateBullet(r)}this._updateCellSizes()}selectDataItem(e){var t,i;if(!(null===(t=this.gantt)||void 0===t?void 0:t.get("editable",!0)))return;if(e===this.get("selectedDataItem"))return void this.unselectDataItems();if(this.unselectDataItems(),!e)return void this.setRaw("selectedDataItem",void 0);const s=e.get("container");if(s){const t=s.get("background");t&&t.set("active",!0);const a=e.get("progressPie");null==a||a.children.push(this.xButton),this.setRaw("selectedDataItem",e),this._xHideDP&&this._xHideDP.dispose(),null===(i=this.gantt)||void 0===i||i.colorPickerButton.set("color",e.get("customColor",e.get("color"))),this.setTimeout((()=>{this._xHideDP=this.events.once("globalpointerup",(()=>{this.unselectDataItems()}))}),200),this._delDp&&this._delDp.dispose(),this._delDp=this.xButton.events.once("click",(()=>{const t=this.xButton.parent;t&&t.children.removeValue(this.xButton),this.deleteDataItem(e),this.unselectDataItems()})),this.xButton.show()}else this.unselectDataItems()}unselectDataItems(){this.setRaw("selectedDataItem",void 0),this.xButton.hide(0),P.each(this.dataItems,(e=>{const t=e.get("container");if(t){const e=t.get("background");e&&e.set("active",!1)}}))}_disposeXHideDP(){this._xHideDP&&(this._xHideDP.dispose(),this._xHideDP=void 0)}_getItemDepth(e){let t=0,i=e.get("parent");for(;i;)t++,i=i.get("parent");return t}_createGhostLabel(){}}Object.defineProperty(G,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GanttCategoryAxis"}),Object.defineProperty(G,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:X.$.classNames.concat([G.className])});var j=i(7909),z=i(7109),M=i(6312),Y=i(7049);class H extends j.j{constructor(){super(...arguments),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>z.L._new(this._root,{themeTagsSelf:["categorylabel"]},[this.labels.template]))))}),Object.defineProperty(this,"containers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>y.W._new(this._root,{themeTagsSelf:["axislabelcontainer"]},[this.containers.template]))))}),Object.defineProperty(this,"controlsContainers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>y.W._new(this._root,{themeTagsSelf:["axislabelcontrols"]},[this.controlsContainers.template]))))}),Object.defineProperty(this,"grips",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>D.A._new(this._root,{themeTags:T.mergeTags(this.grips.template.get("themeTags",["grip","axislabel"]),this.get("themeTags",[]))},[this.grips.template]))))}),Object.defineProperty(this,"progressPies",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>M.w._new(this._root,{themeTags:T.mergeTags(this.progressPies.template.get("themeTags",["progresspie"]),this.get("themeTags",[]))},[this.progressPies.template]))))}),Object.defineProperty(this,"taskBullets",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>s.z._new(this._root,{toggleKey:"active",icon:o.T.new(this._root,{themeTags:["icon"]}),themeTags:T.mergeTags(this.taskBullets.template.get("themeTags",["taskbullet"]),this.get("themeTags",[]))},[this.taskBullets.template]))))}),Object.defineProperty(this,"durationSteppers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new _.o(w.YS.new({}),(()=>Y.l._new(this._root,{themeTags:T.mergeTags(this.durationSteppers.template.get("themeTags",["durationstepper"]),this.get("themeTags",[]))},[this.durationSteppers.template]))))})}makeLabel(e,t){const i=this.axis,s=this.containers.make(),a=e.dataContext;s.set("layout",this._root.horizontalLayout),s.set("width",n.AQ),s._setDataItem(e),this.containers.push(s),e.setRaw("container",s);const o=s.set("background",D.A.new(this._root,{themeTags:["background","axislabelcontainer"],interactive:!0}));o.events.on("click",(e=>{i.selectDataItem(e.target.dataItem)}));const r=this.grips.make();s.children.push(r),this.grips.push(r),e.setRaw("grip",r);const l=this.taskBullets.make();s.children.push(l),this.taskBullets.push(l),e.setRaw("taskBullet",l),l.events.on("click",(e=>{const t=e.target.dataItem;t&&i.toggleCollapse(t,!t.get("collapsed",!1))}));const c=s.children.push(y.W.new(this._root,{width:n.AQ,centerY:n.CI,y:n.CI})),h=super.makeLabel(e,t);let d;c.children.push(h),h.events.on("pointerover",(()=>{o.hover()})),h.events.on("pointerout",(()=>{o.unhover()})),h.events.on("click",(()=>{h.set("maxWidth",void 0)})),s.events.on("boundschanged",(()=>{h.set("maxWidth",c.width())})),h.on("active",(t=>{t&&(d=h.get("text",""),h.set("text",e.get("name")))})),h.on("text",(t=>{null!=d&&t!=d&&(e.set("name",t),a&&(a[this.axis.get("nameField","name")]=t))}));const g=this.controlsContainers.make();this.controlsContainers.push(g),e.setRaw("controlsContainer",g),s.children.push(g);const u=this.durationSteppers.make();g.children.push(u),e.setRaw("durationStepper",u),this.durationSteppers.push(u),u.on("value",(e=>{const t=u.dataItem;t&&R.isNumber(e)&&t.set("duration",e)}));const p=e.get("duration");R.isNumber(p)&&u.set("value",p),e.on("duration",(e=>{u.set("value",e)}));const m=this.progressPies.make();return g.children.push(m),e.setRaw("progressPie",m),m.events.on("click",(e=>{this.axis.toggleProgressPie(e.target.dataItem)})),this.progressPies.push(m),this.axis.labelsContainer.children.moveValue(s,0),i._updateBullet(e),s.appear(),h}updateLabel(e,t,i){if(e){const s=e.dataItem;if(s){const a=s.get("container");if(a){R.isNumber(t)||(t=0);let s=0;R.isNumber(i)&&i!=t&&(t+=(i-t)*s),a.set("y",this.positionToCoordinate(t)),this.toggleVisibility(a,t,e.get("minPosition",0),e.get("maxPosition",1))}}}}updateTick(e,t,i,s){super.updateTick(e,t,i,s),e&&e.set("length",-this.axis.labelsContainer.width())}}Object.defineProperty(H,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GanttCategoryAxisRenderer"}),Object.defineProperty(H,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:j.j.classNames.concat([H.className])});var W=i(6284);class N extends W.n{}Object.defineProperty(N,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GanttDateAxisRenderer"}),Object.defineProperty(N,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:W.n.classNames.concat([N.className])});var U=i(3355),F=i(2364),E=i(9512),Q=i(3145);class Z extends y.W{constructor(){super(...arguments),Object.defineProperty(this,"scrollbarX",{enumerable:!0,configurable:!0,writable:!0,value:S.L.new(this._root,{orientation:"horizontal"})}),Object.defineProperty(this,"scrollbarY",{enumerable:!0,configurable:!0,writable:!0,value:S.L.new(this._root,{orientation:"vertical"})}),Object.defineProperty(this,"xyChart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"xAxis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"xAxisMinor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"yAxis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controls",{enumerable:!0,configurable:!0,writable:!0,value:y.W.new(this._root,{themeTags:["controls"],layout:this._root.horizontalLayout})}),Object.defineProperty(this,"zoomControls",{enumerable:!0,configurable:!0,writable:!0,value:y.W.new(this._root,{themeTagsSelf:["zoomcontrols"]})}),Object.defineProperty(this,"addButton",{enumerable:!0,configurable:!0,writable:!0,value:this.controls.children.push(s.z.new(this._root,{themeTags:["add","plus"],tooltip:this.root.systemTooltip,icon:o.T.new(this._root,{themeTags:["icon"]})}))}),Object.defineProperty(this,"colorPickerButton",{enumerable:!0,configurable:!0,writable:!0,value:this.controls.children.push(E.w.new(this._root,{disableOpacity:!0,tooltip:this.root.systemTooltip}))}),Object.defineProperty(this,"expandButton",{enumerable:!0,configurable:!0,writable:!0,value:this.controls.children.push(s.z.new(this._root,{themeTags:["expand","secondary","fixedwidth"],icon:o.T.new(this._root,{themeTags:["icon"]}),tooltip:this.root.systemTooltip}))}),Object.defineProperty(this,"collapseButton",{enumerable:!0,configurable:!0,writable:!0,value:this.controls.children.push(s.z.new(this._root,{themeTags:["collapse","secondary","fixedwidth"],icon:o.T.new(this._root,{themeTags:["icon"]}),tooltip:this.root.systemTooltip}))}),Object.defineProperty(this,"linkButton",{enumerable:!0,configurable:!0,writable:!0,value:this.controls.children.push(s.z.new(this._root,{themeTags:["link","secondary","fixedwidth"],icon:o.T.new(this._root,{themeTags:["icon"]}),tooltip:this.root.systemTooltip}))}),Object.defineProperty(this,"fitButton",{enumerable:!0,configurable:!0,writable:!0,value:this.zoomControls.children.push(s.z.new(this._root,{themeTags:["fit","secondary","zoombutton"],icon:o.T.new(this._root,{themeTags:["icon"]}),tooltip:this.root.systemTooltip}))}),Object.defineProperty(this,"zoomOutButton",{enumerable:!0,configurable:!0,writable:!0,value:this.zoomControls.children.push(s.z.new(this._root,{themeTags:["zoomout","secondary","zoombutton"],icon:o.T.new(this._root,{themeTags:["icon"]}),tooltip:this.root.systemTooltip}))}),Object.defineProperty(this,"editButton",{enumerable:!0,configurable:!0,writable:!0,value:this.controls.children.push(s.z.new(this._root,{themeTags:["edit","secondary","fixedwidth"],icon:o.T.new(this._root,{themeTags:["icon"]}),tooltip:this.root.systemTooltip}))}),Object.defineProperty(this,"clearButton",{enumerable:!0,configurable:!0,writable:!0,value:this.controls.children.push(a.p.new(this._root,{themeTags:["clear","secondary","confirm"],icon:o.T.new(this._root,{themeTags:["icon"]}),tooltip:this.root.systemTooltip,active:!1}))}),Object.defineProperty(this,"colorPicker",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(F.z.new(this._root,{visible:!1}))}),Object.defineProperty(this,"_customColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.addTag("gantt"),this._defaultThemes.push(v.new(this._root)),super._afterNew();const e=this._root;this.colorPickerButton.events.on("click",(()=>{this.yAxis.xButton.hide(0),this.colorPicker.setAll({colorButton:this.colorPickerButton}),this.children.moveValue(this.colorPicker,this.children.length-1),this.yAxis._disposeXHideDP()})),this.colorPicker.events.on("colorchanged",(()=>{this._customColor=this.colorPicker.get("color"),this.yAxis.unselectDataItems()})),this.addButton.events.on("click",(()=>{this.addNewTask()}));const t=this.children.push(c.z.new(e,{}));t.plotContainer.children.push(this.zoomControls),t.zoomOutButton.set("forceHidden",!0),t.children.push(this.controls),t.set("cursor",U.L.new(e,{xAxis:this.xAxis,yAxis:this.yAxis}));const i=H.new(e,{});i.containers.template.adapters.add("x",(()=>0));const s=t.yAxes.push(G.new(e,{categoryField:"id",cellSizeField:"cellSize",collapsedField:"collapsed",parentIdField:"parentId",colorField:"color",idField:"id",nameField:"name",renderer:i}));s.gantt=this,s.events.on("boundschanged",(()=>{this._updateScrollbar()})),t.plotContainer.events.on("boundschanged",(()=>{this._updateScrollbar()})),this.on("visible",(()=>{this.root.events.once("frameended",(()=>{this._updateScrollbar()}))}));const a=N.new(e,{themeTags:["minor"]});a.grid.template.adapters.add("forceHidden",((e,t)=>{const i=t.dataItem;return!(!i||!i.get("active"))||e}));const o=t.xAxes.push(l.new(e,{themeTags:["minor"],baseInterval:{timeUnit:"day",count:1},renderer:a,background:D.A.new(e,{fill:(0,p.$_)(4095),fillOpacity:0})}));let n;o.gantt=this,o.events.on("pointerout",(()=>{a.grid.each((e=>{e.unhover()}))})),o.events.on("click",(()=>{if(n){const e=n.dataItem;if(e){const t=e.get("endValue");if(void 0!==t){let i=!1;o.axisRanges.each((e=>{e.get("value")===t&&(this.unmarkDate(t),i=!0)})),i||(e.set("active",!0),this.markDate(t))}}}})),o.events.on("globalpointermove",(e=>{if(o.isHover()){const t=o.toLocal({x:e.point.x,y:e.point.y});let i=1/0;a.grid.each((e=>{if(e.isVisible()){const s=e.dataItem;if(s&&!s.get("isRange")){let s=Math.abs(e.x()-t.x);e.get("active")||e.unhover(),s<i&&(i=s,n=e)}}})),n&&n.hover()}}));const r=N.new(e,{}),h=t.xAxes.push(l.new(e,{baseInterval:{timeUnit:"day",count:1},renderer:r,tooltip:L.u.new(e,{})}));h.gantt=this,h.onPrivate("min",(e=>{o.setPrivate("min",e)})),h.onPrivate("max",(e=>{o.setPrivate("max",e)})),h.on("start",(e=>{o.set("start",e)})),h.on("end",(e=>{o.set("end",e)}));const d=h.baseDuration();void 0===h.getPrivate("min")&&h.setPrivate("min",(new Date).getTime()),void 0===h.getPrivate("max")&&h.setPrivate("max",(new Date).getTime()+3*d),h.onPrivate("gridInterval",(e=>{const t=this.get("gridIntervals");t&&t[e.timeUnit]&&o.set("gridIntervals",t[e.timeUnit])}));var g=t.series.push(V.new(e,{xAxis:h,yAxis:s,baseAxis:s,openValueXField:"start",valueXField:"end",progressField:"progress",durationField:"duration",linkToField:"linkTo",categoryYField:"id",idField:"id"}));g.gantt=this,this.scrollbarX=t.set("scrollbarX",this.scrollbarX),this.scrollbarY=t.set("scrollbarY",this.scrollbarY),this.scrollbarY.startGrip.set("forceHidden",!0),this.scrollbarY.endGrip.set("forceHidden",!0),this.children.push(this.scrollbarX),this.xyChart=t,this.series=g,this.xAxis=h,this.yAxis=s,this.xAxisMinor=o;const u="valueschanged";this.series.events.on(u,(()=>{this.get("editable")&&this.events.isEnabled(u)&&this.events.dispatch(u,{type:u,target:this})})),this.expandButton.events.on("click",(()=>{this.yAxis.expandAll()})),this.collapseButton.events.on("click",(()=>{this.yAxis.collapseAll()})),this.clearButton.events.on("confirmed",(()=>{this.clearAll()})),this.linkButton.on("active",(e=>{this.set("linkNewTasks",e)})),this.colorPicker.on("color",(e=>{this.yAxis.setDataItemColor(this.yAxis.get("selectedDataItem"),e)})),this.editButton.on("active",(e=>{this.set("editable",e)})),this.fitButton.events.on("click",(()=>{let e=g.getPrivate("selectionMinX",0),t=g.getPrivate("selectionMaxX",0);const i=h.get("extraMin",.1),s=h.get("extraMax",.1);h.zoomToValues(e-(t-e)*i,t+(t-e)*s)})),this.zoomOutButton.events.on("click",(()=>{h.zoom(0,1)}));let m=!1;for(let e=0;e<Q.i_.licenses.length;e++)Q.i_.licenses[e].match(/^AM5G.{5,}/i)&&(m=!0);m?this._root._licenseApplied():this._root._showBranding()}_prepareChildren(){super._prepareChildren(),this.isDirty("editable")&&this._toggleEditable(this.get("editable",!0))}clearAll(){var e;this.yAxis.deleteAll(),this._customColor=void 0,null===(e=this.get("colors"))||void 0===e||e.reset(),this.colorPickerButton.set("color",void 0),this._nextColor();const t=new Date;t.setHours(0,0,0,0),this.xAxis.setPrivate("min",t.getTime()),this.xAxis.setPrivate("max",t.getTime()+5*this.xAxis.baseDuration());for(let e=this.xAxisMinor.axisRanges.length-1;e>=0;e--){const t=this.xAxisMinor.axisRanges.getIndex(e);t&&this.unmarkDate(t.get("value"))}}_updateChildren(){if(super._updateChildren(),this.isDirty("linkNewTasks")&&this.linkButton.set("active",this.get("linkNewTasks",!1)),this.isDirty("editable")&&this.editButton.set("active",this.get("editable",!0)),this._sizeDirty||this.isDirty("sidebarWidth")){let e=T.relativeToValue(this.get("sidebarWidth",(0,n.aQ)(20)),this.innerWidth());e=Math.max(e,this.yAxis.get("minWidth",100)),this.yAxis.labelsContainer.set("width",e),this._updateScrollbar()}if(this.isDirty("durationUnit")){const e=this.get("durationUnit");e&&(this.xAxis.set("baseInterval",{timeUnit:e,count:1}),this.xAxisMinor.set("baseInterval",{timeUnit:e,count:1}))}void 0===this.colorPickerButton.getPrivate("color")&&this._nextColor()}_updateScrollbar(){const e=this.xyChart.plotContainer.toGlobal({x:0,y:0});this.scrollbarX.setAll({x:e.x,width:this.xyChart.plotContainer.width()})}addNewTask(e,t,i=1,s,a=0,o){let n=this.series.dataItems.length,r=this.yAxis.dataItems.length;P.each(this.yAxis.dataItems,(e=>{e.get("id")=="gantt_"+r&&r++}));const l="gantt_"+r;let c;e||(e="New Task"),void 0===o&&(o=this.get("linkNewTasks",!1)),c=null!=s?this.yAxis.getDataItemById(s):this.yAxis.get("selectedDataItem");let h=0;if(c){if((s=c.get("id"))&&void 0===t){const e=this.series.getDataItemById(s);e&&(t=e.get("valueX",(new Date).getTime()))}let e=c.get("children");e||(e=c.set("children",[])),h=e.length}void 0===t&&(t=m.roun(this.xAxis.getPrivate("min",0),this.get("durationUnit","day"),1,this.root),this.series.dataItems.length>0&&(t=this.series.dataItems[n-1].get("valueX",(new Date).getTime())));const d={name:e,id:l};s&&(d.parentId=s);let g,u=0;if(c){u=this.yAxis.dataItems.indexOf(c)+1+h;const e=c.get("children",[]);u>=this.yAxis.dataItems.length?(e.length>0&&(g=e[e.length-1]),this.yAxis.data.push(d)):(e.length>0&&(g=this.yAxis.dataItems[u-1]),this.yAxis.data.insertIndex(u,d)),u++}else{for(let e=this.yAxis.dataItems.length-1;e>=0;e--){const t=this.yAxis.dataItems[e];if(!t.get("parentId")){g=t;break}}this.yAxis.data.push(d),u=this.yAxis.dataItems.length}const p=this.xAxis.baseDuration(),v={start:t,end:t+1,duration:i,progress:a,id:l,name:e};if(o&&g){const e=this.series.getDataItemById(g.get("id"));if(e){const t=e.get("linkTo",[]);t.includes(l)||(t.push(l),e.set("linkTo",t))}}this.series.data.moveValue(v,u-1),this.series.dataItems[u-1].animate({key:"valueX",to:t+p*i,duration:this.series.get("interpolationDuration",0),easing:this.series.get("interpolationEasing")}),this.yAxis._disposeXHideDP(),this.yAxis.xButton.hide(0);const f=this.yAxis.get("maxZoomCount",20);let b=Math.max(0,Math.round(u-f/2)),y=b+f;n=this.yAxis.dataItems.length,y>n&&(y=n,b=Math.max(0,y-f)),this.yAxis.zoomToIndexes(b,y),this.yAxis.adjustZoom()}_nextColor(){var e;if(this._customColor)return this._customColor;const t=null===(e=this.get("colors"))||void 0===e?void 0:e.next();return this.colorPickerButton.setPrivate("color",t),t}markDate(e){const t=this.xAxisMinor,i=t.createAxisRange(t.makeDataItem({value:e})),s="datemarked";this.events.isEnabled(s)&&this.events.dispatch(s,{type:s,target:this,dataItem:i,date:e})}unmarkDate(e){const t=this.xAxisMinor;let i;t.axisRanges.each((s=>{s&&s.get("value")===e&&(t.axisRanges.removeValue(s),i=s)}));const s="dateunmarked";this.events.isEnabled(s)&&this.events.dispatch(s,{type:s,target:this,dataItem:i,date:e})}_toggleEditable(e){const t="forceHidden",i="forceInactive",s="draggable";this.series.markDirtyValues(),this.addButton.set(t,!e),this.colorPickerButton.set(t,!e),this.clearButton.set(t,!e),this.linkButton.set(t,!e);const a=this.yAxis.get("renderer");a.labels.template.set(i,!e),a.grips.template.set(t,!e),a.containers.template.set(s,e),a.controlsContainers.template.set(i,!e),this.series.columns.template.set(s,e),this.series.startGrips.template.set(t,!e),this.series.endGrips.template.set(t,!e),this.series.progressGrips.template.set(t,!e),this.series.startBullets.template.set(t,!e),this.series.endBullets.template.set(t,!e),this.series.links.template.set(i,!e),this.xAxisMinor.set(i,!e)}}Object.defineProperty(Z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Gantt"}),Object.defineProperty(Z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.W.classNames.concat([Z.className])})},9674:function(e,t,i){i.r(t),i.d(t,{am5gantt:function(){return s}});const s=i(133)}},function(e){e.O(0,[6450,6430],(function(){return 9674,e(e.s=9674)}));var t=e.O(),i=window;for(var s in t)i[s]=t[s];t.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})}]);
//# sourceMappingURL=gantt.js.map