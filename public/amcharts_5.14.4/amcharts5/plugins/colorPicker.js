"use strict";(self.webpackChunk_am5=self.webpackChunk_am5||[]).push([[6430],{2364:function(t,e,o){o.d(e,{z:function(){return k}});var i=o(6973),r=o(1112),l=o(7144),s=o(6245),a=o(5769),n=o(8054),c=o(8035),h=o(8777),u=o(6691),d=o(1479),p=o(962),g=o(7142),f=o(3497),b=o(2162),y=o(1747),v=o(7652),_=o(5040);class k extends h.W{constructor(){super(...arguments),Object.defineProperty(this,"_currentRectangle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_clickOverlay",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(g.A.new(this._root,{position:"absolute",fillOpacity:0,interactive:!0,isMeasured:!1,fill:(0,r.$_)(0),forceHidden:!0}))}),Object.defineProperty(this,"rectangles",{enumerable:!0,configurable:!0,writable:!0,value:new l.o(a.YS.new({}),(()=>f.c._new(this._root,{},[this.rectangles.template])))}),Object.defineProperty(this,"gradientsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(h.W.new(this._root,{themeTagsSelf:["gradientscontainer"],width:s.AQ,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"colorGradientsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.gradientsContainer.children.push(h.W.new(this._root,{width:s.AQ,layer:0}))}),Object.defineProperty(this,"colorRectangle",{enumerable:!0,configurable:!0,writable:!0,value:this.colorGradientsContainer.children.push(g.A.new(this._root,{crisp:!0,themeTags:["colorrectangle"],width:s.AQ,height:s.AQ,strokeWidth:1}))}),Object.defineProperty(this,"colorRectangleWhiteOverlay",{enumerable:!0,configurable:!0,writable:!0,value:this.colorGradientsContainer.children.push(g.A.new(this._root,{crisp:!0,forceInactive:!0,width:s.AQ,height:s.AQ}))}),Object.defineProperty(this,"colorRectangleBlackOverlay",{enumerable:!0,configurable:!0,writable:!0,value:this.colorGradientsContainer.children.push(g.A.new(this._root,{crisp:!0,forceInactive:!0,width:s.AQ,height:s.AQ}))}),Object.defineProperty(this,"slider",{enumerable:!0,configurable:!0,writable:!0,value:this.gradientsContainer.children.push(b.i.new(this._root,{orientation:"vertical",themeTags:["gradient"]}))}),Object.defineProperty(this,"inputContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(h.W.new(this._root,{marginTop:10,layout:this._root.horizontalLayout,width:s.AQ}))}),Object.defineProperty(this,"pickerButton",{enumerable:!0,configurable:!0,writable:!0,value:this.inputContainer.children.push(n.z.new(this._root,{themeTags:["picker","pickertool"],toggleKey:"active",icon:d.T.new(this._root,{themeTags:["icon"]})}))}),Object.defineProperty(this,"noColorButton",{enumerable:!0,configurable:!0,writable:!0,value:this.inputContainer.children.push(n.z.new(this._root,{themeTags:["nocolor","pickertool"],icon:d.T.new(this._root,{themeTags:["icon"]})}))}),Object.defineProperty(this,"colorInput",{enumerable:!0,configurable:!0,writable:!0,value:this.inputContainer.children.push(u.Y.new(this._root,{themeTags:["input","color"]}))}),Object.defineProperty(this,"opacityContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(h.W.new(this._root,{width:s.AQ,marginTop:10,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"opacitySlider",{enumerable:!0,configurable:!0,writable:!0,value:this.opacityContainer.children.push(b.i.new(this._root,{themeTags:["opacity"],orientation:"horizontal"}))}),Object.defineProperty(this,"targetCircle",{enumerable:!0,configurable:!0,writable:!0,value:this.colorGradientsContainer.children.push(c.C.new(this._root,{themeTags:["circle","target"],isMeasured:!1,forceInactive:!0,position:"absolute",layer:30}))}),Object.defineProperty(this,"buttonsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(h.W.new(this._root,{marginTop:10,layout:this._root.horizontalLayout,width:s.AQ}))}),Object.defineProperty(this,"cancelButton",{enumerable:!0,configurable:!0,writable:!0,value:this.buttonsContainer.children.push(n.z.new(this._root,{themeTags:["cancel"],label:p._.new(this._root,{})}))}),Object.defineProperty(this,"okButton",{enumerable:!0,configurable:!0,writable:!0,value:this.buttonsContainer.children.push(n.z.new(this._root,{themeTags:["ok"],label:p._.new(this._root,{})}))}),Object.defineProperty(this,"_isColorDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isPicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isEditing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_previousColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_previousOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_prevColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._defaultThemes.push(i.d.new(this._root)),this.addTag("colorpicker"),super._afterNew(),this.set("tooltip",this._root.systemTooltip),this.cancelButton.events.on("click",(()=>{this.cancel()})),this.okButton.events.on("click",(()=>{this.set("colorButton",void 0),this.events.dispatch("colorchanged",{type:"colorchanged",target:this,color:this.get("color"),colorOpacity:this.get("colorOpacity")})}));const t=this.root.container;t.events.on("boundschanged",(()=>{const e=t.width(),o=t.height();this._clickOverlay.setAll({width:e,height:o,x:0,y:0})})),this._clickOverlay.events.on("click",(()=>{this._isPicking||this._isEditing?this.pickerButton.set("active",!1):this.cancel()})),this.set("layout",this._root.verticalLayout),this.noColorButton.events.on("click",(()=>{this.set("color",void 0);const t=this.get("colorButton");t&&t.setAll({color:void 0,colorOpacity:1}),this.events.dispatch("colorchanged",{type:"colorchanged",target:this,color:void 0,colorOpacity:1}),this.set("colorButton",void 0)})),this.colorInput.on("text",(t=>{if(t){"#"!==(t=t.replace(/[^abcdef0-9#]/gi,"")).substring(0,1)&&(t="#"+t);try{this.set("color",(0,r.$_)(t))}catch(t){return}this.colorInput.set("text",t)}})),this.pickerButton.on("active",(t=>{this._isPicking=Boolean(t),this.set("forceInactive",t)})),v.supports("keyboardevents")&&this._disposers.push(v.addEventListener(document,"keyup",(t=>{"Escape"===t.key&&this.set("colorButton",void 0)}))),this.gradientsContainer.events.on("boundschanged",(()=>{const t=Math.floor(this.colorGradientsContainer.width());this.colorGradientsContainer.setAll({width:t,height:t}),this.slider.set("height",t)})),this.targetCircle.setAll({x:this.colorRectangle.width(),y:0}),this.targetCircle.adapters.add("x",(t=>{if(_.isNumber(t)){const e=this.colorRectangle.width();return Math.min(e,Math.max(0,t))}})),this.targetCircle.adapters.add("y",(t=>{if(_.isNumber(t)){const e=this.colorRectangle.height();return Math.min(e,Math.max(0,t))}})),this.slider.on("start",(()=>{this.set("hue",this.slider.get("start",0))}));const e=this.slider.get("background");e&&e.set("layer",0),this.opacitySlider.on("start",(()=>{this.set("colorOpacity",this.opacitySlider.get("start",1))}));const o=this.opacitySlider.get("background");o&&o.set("layer",0),this.colorRectangle.events.on("pointerdown",(t=>{this._isColorDown=!0,this._handleTargetMove(t),this.set("draggable",!1),this.dragStop(t)})),this.colorRectangle.events.on("globalpointermove",(t=>{if(this._isColorDown&&this._handleTargetMove(t),this._isPicking){const e=this._root.container._display,o=e.getLayer().context,i=e._renderer.resolution,l=o.getImageData(Math.floor(t.point.x*i),Math.floor(t.point.y*i),1,1).data,s=r.Il.fromRGB(l[0],l[1],l[2]);this.set("color",s)}})),this.colorRectangle.events.on("globalpointerup",(t=>{this.set("draggable",!0),this.dragStop(t),this._isColorDown=!1})),this.colorInput.on("active",(t=>{this._isEditing=Boolean(t)}))}_updateChildren(){var t,e,o,i;if(super._updateChildren(),this.isDirty("colorButton")){this.pickerButton.set("active",!1);const t=this.get("colorButton");let e=!0;if(t){this.opacityContainer.set("forceHidden",t.get("disableOpacity")),this._previousColor=t.get("color",t.getPrivate("color")),this._previousOpacity=t.get("colorOpacity");const o=this.parent;o&&(o.children.moveValue(this._clickOverlay),o.children.moveValue(this)),e=!1,this.show(),this.set("color",t.get("color",t.getPrivate("color"))),this.set("colorOpacity",t.get("colorOpacity")||1)}else this.hide();this._clickOverlay.set("forceHidden",e)}if(this.isDirty("hue")&&(this._handleDirtyHue(),this._updateColor()),this.isDirty("colorOpacity")){const t=this.opacitySlider,e=this.get("colorOpacity",1);t.startGrip.set("tooltipText","opacity:"+Math.round(100*e)+"%"),t.startGrip.isDragging()?t.startGrip.hover():(t.set("start",e),t.markDirtyKey("start"));const o=this.get("colorButton");o&&o.set("colorOpacity",e),this._updateOpacitySliderGrip()}if(this.isDirty("color")){const t=this.get("color"),e=this._prevColor;let o=!1;if(t&&e&&t.toCSSHex()===e.toCSSHex()&&(o=!0),!o){if(t){if(this.targetCircle.show(),!this._isColorDown){const e=v.hslToHsv(t.toHSL());this.setRaw("hue",e.h),this.slider.startGrip.isDragging()||this.slider.set("start",e.h),this.targetCircle.setAll({x:this.colorRectangle.width()*e.s,y:this.colorRectangle.height()*(1-e.v)})}this.targetCircle.set("fill",t),this._handleDirtyHue(),this.colorInput.set("text",t.toCSSHex().substring(1,7))}else this.targetCircle.hide(),this.colorInput.set("text","");this._prevColor=t;const e=this.opacitySlider.get("background");e&&e.set("fillGradient",y.o.new(this._root,{rotation:0,stops:[{color:t,opacity:0},{color:t,opacity:1}]}));const o=this.get("colorButton");o&&o.set("color",t),this._updateOpacitySliderGrip()}}if(this.isDirty("backgroundColor")){const l=this.get("backgroundColor",(0,r.$_)(16777215));this.colorRectangle.setAll({stroke:l}),this.colorRectangleBlackOverlay.setAll({stroke:l}),this.colorRectangleWhiteOverlay.setAll({stroke:l}),null===(t=this.pickerButton.get("background"))||void 0===t||t.states.applyAnimate("default",0),null===(e=this.noColorButton.get("background"))||void 0===e||e.states.applyAnimate("default",0),null===(o=this.cancelButton.get("background"))||void 0===o||o.states.applyAnimate("default",0),null===(i=this.okButton.get("background"))||void 0===i||i.states.applyAnimate("default",0)}}_handleDirtyHue(){var t,e,o;const i=this.slider.get("start",0),l=r.Il.fromHSL(i,1,.5),s=this.slider.startGrip;this.colorRectangle.setAll({fill:l,stroke:this.get("backgroundColor",(0,r.$_)(16777215))});const a=s.get("background");a&&(a.set("fill",l),null===(t=a.states.lookup("default"))||void 0===t||t.set("fill",l),null===(e=a.states.lookup("hover"))||void 0===e||e.set("fill",l),null===(o=a.states.lookup("down"))||void 0===o||o.set("fill",l)),this.colorRectangleWhiteOverlay.setAll({fillGradient:y.o.new(this._root,{rotation:0,stops:[{color:(0,r.$_)(16777215),opacity:1,offset:0},{color:(0,r.$_)(16777215),opacity:0,offset:1}]})}),this.colorRectangleBlackOverlay.setAll({fillGradient:y.o.new(this._root,{stops:[{color:(0,r.$_)(0),opacity:0,offset:0},{color:(0,r.$_)(0),opacity:1,offset:1}]})})}_handleTargetMove(t){const e=this.colorGradientsContainer.toLocal({x:t.point.x,y:t.point.y});this.targetCircle.setAll({x:e.x,y:e.y}),this._updateColor()}_updateColor(){const t=this.targetCircle.x(),e=this.targetCircle.y(),o=this.colorRectangle.height(),i=this.colorRectangle.width(),l=this.slider.get("start",0);let s=v.hsvToHsl({h:l,s:t/i,v:1-e/o});this.set("color",r.Il.fromHSL(s.h,s.s,s.l))}_updateOpacitySliderGrip(){var t,e,o;const i=this.opacitySlider.startGrip.get("background");if(i){const l=r.Il.interpolate(this.get("colorOpacity",1),this.get("backgroundColor",(0,r.$_)(16777215)),this.get("color",(0,r.$_)(16777215)));i.set("fill",l),null===(t=i.states.lookup("default"))||void 0===t||t.set("fill",l),null===(e=i.states.lookup("hover"))||void 0===e||e.set("fill",l),null===(o=i.states.lookup("down"))||void 0===o||o.set("fill",l)}}cancel(){var t;null===(t=this.get("colorButton"))||void 0===t||t.setAll({color:this._previousColor,colorOpacity:this._previousOpacity}),this._isEditing=!1,this._isPicking=!1,this.set("color",this._previousColor),this.set("colorButton",void 0)}}Object.defineProperty(k,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorPicker"}),Object.defineProperty(k,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.W.classNames.concat([k.className])})},9512:function(t,e,o){o.d(e,{w:function(){return n}});var i=o(6973),r=o(1112),l=o(8777),s=o(1479),a=o(3497);class n extends l.W{constructor(){super(...arguments),Object.defineProperty(this,"_currentRectangle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"noColorGraphics",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(s.T.new(this._root,{themeTags:["nocolor"]}))}),Object.defineProperty(this,"icon",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(s.T.new(this._root,{themeTags:["icon"]}))})}_afterNew(){this._defaultThemes.push(i.d.new(this._root)),this.addTag("colorpickerbutton"),super._afterNew(),this.set("background",a.c.new(this._root,{themeTags:["background"]}))}_changed(){if(super._changed(),this.isDirty("color")||this.isPrivateDirty("color")||this.isDirty("colorOpacity")||this.isDirty("backgroundColor")){let t=this.get("color",this.getPrivate("color")),e=this.get("colorOpacity",1);t?this.noColorGraphics.hide():this.noColorGraphics.show();const o=this.get("backgroundColor",(0,r.$_)(16777215));t||(t=o);let i=t,l=-.1;o.toHSL().l<.5&&(l=-l),i=r.Il.lighten(t,l),this.noColorGraphics.set("stroke",i);const s=this.get("background");s&&s.setAll({fill:t,stroke:i,fillOpacity:e,strokeOpacity:Math.max(.2,e)}),this.icon.set("stroke",r.Il.alternative(i,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text")))}}}Object.defineProperty(n,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorPickerButton"}),Object.defineProperty(n,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.W.classNames.concat([n.className])})},6973:function(t,e,o){o.d(e,{d:function(){return n}});var i=o(3409),r=o(6245),l=o(3497),s=o(1747),a=o(1112);class n extends i.Q{setupDefaultRules(){super.setupDefaultRules();const t=this.rule.bind(this);t("ColorPickerButton").setAll({colorOpacity:1,width:35,height:35,marginRight:0,cursorOverStyle:"pointer"}),t("Graphics",["colorpickerbutton","icon"]).setAll({svgPath:"M 1 14 L 3 16 L 5 14 L 7 14 L 15 6 A 0.6 0.6 90 0 0 11 2 L 3 10 L 3 12 L 1 14 M 7 4 L 13 10",forceInactive:!0,centerX:r.CI,centerY:r.CI,x:r.CI,y:r.CI,strokeOpacity:.5}),t("Graphics",["colorpickerbutton","nocolor"]).setAll({x:r.CI,y:r.CI,centerX:r.CI,centerY:r.CI,forceInactive:!0,svgPath:"M 5 5 L 25 25 M 25 5 L 5 25"}),t("ColorPicker").setAll({exportable:!1,paddingBottom:20,paddingTop:20,paddingLeft:20,paddingRight:20,width:250,position:"absolute",x:r.CI,y:r.CI,centerX:r.CI,centerY:r.CI,background:l.c.new(this._root,{strokeOpacity:1,fillOpacity:1,shadowBlur:8,shadowColor:(0,a.$_)(0),shadowOpacity:.3,shadowOffsetX:2,shadowOffsetY:2,fill:(0,a.$_)(16777215)})}),t("ColorPicker").states.create("hidden",{stateAnimationDuration:200,opacity:0,visible:!1}),t("ColorPicker").states.create("default",{stateAnimationDuration:300}),t("Container",["colorpicker","lastcolors"]).setAll({layout:this._root.horizontalLayout,width:r.AQ}),t("Circle",["colorpicker","circle","target"]).setAll({radius:5,fill:(0,a.$_)(16777215),stroke:(0,a.$_)(16777215),fillOpacity:1,strokeOpacity:1,strokeWidth:2,shadowColor:(0,a.$_)(0),shadowOpacity:1,shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0}),t("Slider",["colorpicker","gradient"]).setAll({marginLeft:15,marginRight:0}),t("RoundedRectangle",["colorpicker","gradient","scrollbar","main","background"]).setAll({fillGradient:s.o.new(this._root,{rotation:90,stops:[{color:(0,a.$_)(16711680),offset:0},{color:(0,a.$_)(16776960),offset:.17},{color:(0,a.$_)(65280),offset:.34},{color:(0,a.$_)(65535),offset:.51},{color:(0,a.$_)(255),offset:.68},{color:(0,a.$_)(16711935),offset:.85},{color:(0,a.$_)(16711680),offset:1}]})}),t("Button",["colorpicker","resize"]).setAll({tooltipY:0,width:22,height:22,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),t("RoundedRectangle",["colorpicker","resize","background"]).setAll({fillOpacity:1,strokeOpacity:1,strokeWidth:2,shadowColor:(0,a.$_)(0),shadowOpacity:1,shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0}),t("Graphics",["colorpicker","resize","button","icon"]).setAll({forceHidden:!0}),t("Slider",["colorpicker","opacity"]).setAll({centerY:r.CI,y:r.CI,width:r.AQ}),t("RoundedRectangle",["colorpicker","main","opacity","background"]).setAll({strokeWidth:1,strokeOpacity:.5}),t("EditableLabel",["colorpicker","input"]).setAll({text:"Text",width:r.AQ,height:30,marginLeft:5,fontSize:"13px",fontFamily:"monospace",oversizedBehavior:"none",textAlign:"center",minWidth:50}),t("EditableLabel",["colorpicker","color","input"]).setAll({maxChars:7}),t("RoundedRectangle",["colorpicker","background","input"]).setAll({strokeWidth:1,cornerRadiusBL:4,cornerRadiusBR:4,cornerRadiusTL:4,cornerRadiusTR:4,strokeOpacity:.25,fillOpacity:0}),t("Button",["colorpicker","pickertool"]).setAll({width:30,height:30,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,tooltipX:(0,r.aQ)(90)}),t("Button",["colorpicker","pickertool","nocolor"]).setAll({tooltipText:"No color",marginLeft:5}),t("Graphics",["colorpicker","icon","nocolor"]).setAll({svgPath:"M 0 0 L 14 14 M 14 0 L 0 14",centerX:r.CI,centerY:r.CI,x:r.CI,y:r.CI}),t("Button",["colorpicker","picker"]).setAll({tooltipText:"Pick color from screen"}),t("Graphics",["picker","icon"]).setAll({centerX:r.CI,centerY:r.CI,x:r.CI,y:r.CI,svgPath:"M 1 14 L 3 16 L 5 14 L 7 14 L 15 6 A 0.6 0.6 90 0 0 11 2 L 3 10 L 3 12 L 1 14 M 7 4 L 13 10"}),t("Button",["colorpicker","button"]).setAll({height:void 0,paddingTop:1,paddingBottom:1,width:r.CI}),t("Button",["colorpicker","button","ok"]).setAll({marginLeft:5}),t("Label",["colorpicker","cancel"]).setAll({text:"Cancel",x:r.CI,centerX:r.CI}),t("Label",["colorpicker","ok"]).setAll({text:"OK",x:r.CI,centerX:r.CI}),t("Tooltip",["colorpicker"]).setAll({getFillFromSprite:!1,autoTextColor:!1,paddingBottom:5,paddingTop:5,paddingLeft:7,paddingRight:7}),t("PointedRectangle",["colorpicker","tooltip","background"]).setAll({fill:(0,a.$_)(0),fillOpacity:.9,stroke:(0,a.$_)(16777215),strokeOpacity:1}),t("Label",["colorpicker","tooltip"]).setAll({fontSize:"12px",fill:(0,a.$_)(16777215)})}}},2789:function(t,e,o){o.r(e),o.d(e,{ColorPicker:function(){return i.z},ColorPickerButton:function(){return r.w}});var i=o(2364),r=o(9512)},7263:function(t,e,o){o.r(e),o.d(e,{am5plugins_colorPicker:function(){return i}});const i=o(2789)}},function(t){var e=(7263,t(t.s=7263)),o=window;for(var i in e)o[i]=e[i];e.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})}]);
//# sourceMappingURL=colorPicker.js.map